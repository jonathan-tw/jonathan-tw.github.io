<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>(èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols | Jonathan&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="Layered Outline What&rsquo;s a protocol? protocols define format, order of messages sent and received among network entities, and actions taken on message transmission, receipt TCP/IP 5 Layer Application Layer HTTPã€DHCPã€RPCã€P2Pã€DNS Transport Layer UDPã€TCP Network Layer (IP) IPã€ICMPã€OSPFã€BGP Data-link Layer (MAC) MACã€VLANã€STP Physical Layer ç¶²è·¯æŒ‘ç·š ISO/OSI 7 Layer ï‚§ Presentation: allow applications to interpret meaning of data. example: encryption, compression, machine-specific conventions. ï‚§ Session: synchronization, checkpointing, recovery of data exchange. åªè¦æ˜¯åœ¨ç¶²çµ¡ä¸Šè·‘çš„åŒ…ï¼Œéƒ½æ˜¯å®Œæ•´çš„">
<meta name="author" content="
Author:&nbsp;Jonathan">
<link rel="canonical" href="https://jonathan-tw.github.io/posts/%E8%AA%B2%E7%A8%8B%E7%AD%86%E8%A8%98ntust-network-communication-protocols/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.c68298aa5045798fc8b25f8a2882169222cb63a98774faa68088de5b1d7b2bfb.css" integrity="sha256-xoKYqlBFeY/Isl&#43;KKIIWkiLLY6mHdPqmgIjeWx17K/s=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
        onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://jonathan-tw.github.io/img/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://jonathan-tw.github.io/img/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="https://jonathan-tw.github.io/img/favicon.ico">
<link rel="apple-touch-icon" href="https://jonathan-tw.github.io/img/favicon.ico">
<link rel="mask-icon" href="https://jonathan-tw.github.io/img/favicon.ico">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta property="og:title" content="(èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols" />
<meta property="og:description" content="Layered Outline What&rsquo;s a protocol? protocols define format, order of messages sent and received among network entities, and actions taken on message transmission, receipt TCP/IP 5 Layer Application Layer HTTPã€DHCPã€RPCã€P2Pã€DNS Transport Layer UDPã€TCP Network Layer (IP) IPã€ICMPã€OSPFã€BGP Data-link Layer (MAC) MACã€VLANã€STP Physical Layer ç¶²è·¯æŒ‘ç·š ISO/OSI 7 Layer ï‚§ Presentation: allow applications to interpret meaning of data. example: encryption, compression, machine-specific conventions. ï‚§ Session: synchronization, checkpointing, recovery of data exchange. åªè¦æ˜¯åœ¨ç¶²çµ¡ä¸Šè·‘çš„åŒ…ï¼Œéƒ½æ˜¯å®Œæ•´çš„" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jonathan-tw.github.io/posts/%E8%AA%B2%E7%A8%8B%E7%AD%86%E8%A8%98ntust-network-communication-protocols/" />
<meta property="og:image" content="https://i.imgur.com/Z6BvqSJ.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-06-15T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://i.imgur.com/Z6BvqSJ.png" />
<meta name="twitter:title" content="(èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols"/>
<meta name="twitter:description" content="Layered Outline What&rsquo;s a protocol? protocols define format, order of messages sent and received among network entities, and actions taken on message transmission, receipt TCP/IP 5 Layer Application Layer HTTPã€DHCPã€RPCã€P2Pã€DNS Transport Layer UDPã€TCP Network Layer (IP) IPã€ICMPã€OSPFã€BGP Data-link Layer (MAC) MACã€VLANã€STP Physical Layer ç¶²è·¯æŒ‘ç·š ISO/OSI 7 Layer ï‚§ Presentation: allow applications to interpret meaning of data. example: encryption, compression, machine-specific conventions. ï‚§ Session: synchronization, checkpointing, recovery of data exchange. åªè¦æ˜¯åœ¨ç¶²çµ¡ä¸Šè·‘çš„åŒ…ï¼Œéƒ½æ˜¯å®Œæ•´çš„"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  2 ,
          "name": "ğŸ“š Posts",
          "item": "https://jonathan-tw.github.io/posts/"
        }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "(èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols",
      "item": "https://jonathan-tw.github.io/posts/%E8%AA%B2%E7%A8%8B%E7%AD%86%E8%A8%98ntust-network-communication-protocols/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "(èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols",
  "name": "(èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols",
  "description": "Layered Outline What\u0026rsquo;s a protocol? protocols define format, order of messages sent and received among network entities, and actions taken on message transmission, receipt TCP/IP 5 Layer Application Layer HTTPã€DHCPã€RPCã€P2Pã€DNS Transport Layer UDPã€TCP Network Layer (IP) IPã€ICMPã€OSPFã€BGP Data-link Layer (MAC) MACã€VLANã€STP Physical Layer ç¶²è·¯æŒ‘ç·š ISO/OSI 7 Layer ï‚§ Presentation: allow applications to interpret meaning of data. example: encryption, compression, machine-specific conventions. ï‚§ Session: synchronization, checkpointing, recovery of data exchange. åªè¦æ˜¯åœ¨ç¶²çµ¡ä¸Šè·‘çš„åŒ…ï¼Œéƒ½æ˜¯å®Œæ•´çš„",
  "keywords": [
    ""
  ],
  "articleBody": "Layered Outline Whatâ€™s a protocol?\nprotocols define format, order of messages sent and received among network entities, and actions taken on message transmission, receipt\nTCP/IP 5 Layer Application Layer HTTPã€DHCPã€RPCã€P2Pã€DNS Transport Layer UDPã€TCP Network Layer (IP) IPã€ICMPã€OSPFã€BGP Data-link Layer (MAC) MACã€VLANã€STP Physical Layer ç¶²è·¯æŒ‘ç·š ISO/OSI 7 Layer ï‚§ Presentation: allow applications to interpret meaning of data. example: encryption, compression, machine-specific conventions. ï‚§ Session: synchronization, checkpointing, recovery of data exchange.\nåªè¦æ˜¯åœ¨ç¶²çµ¡ä¸Šè·‘çš„åŒ…ï¼Œéƒ½æ˜¯å®Œæ•´çš„ã€‚å¯ä»¥æœ‰ä¸‹å±¤æ²’ä¸Šå±¤ï¼Œçµ•å°ä¸å¯èƒ½æœ‰ä¸Šå±¤æ²’ä¸‹å±¤ã€‚ IP address: ä¸€å€‹ç¶²å¡åœ¨ç¶²çµ¡ä¸–ç•Œçš„é€šè¨Šåœ°å€ï¼Œç›¸ç•¶æ–¼æˆ‘å€‘ç¾å¯¦ä¸–ç•Œçš„é–€ç‰Œè™Ÿç¢¼ã€‚ MAC address: èº«ä»½è­‰ï¼Œå€åŸŸç¶²å…§é€šä¿¡ç”¨ã€‚\nMacåœ¨data link layerä½¿ç”¨ï¼ŒIPåœ¨network layerä½¿ç”¨ï¼ŒIPä½ç½®åœ¨å€åŸŸç¶²å…§å¯èƒ½ç™¼ç”Ÿæ”¹è®Šï¼Œå”¯ä¸€æ€§çš„MACéœ€è¦ã€‚ macä½ç½®å…¨çƒå”¯ä¸€ï¼Œå›ºåŒ–åœ¨ç¶²å¡è£¡ã€‚OSè­˜åˆ¥å‡ºä¾†çš„macä½ç½®å¯ä»¥æ›´æ”¹ï¼Œä»–æ˜¯ä¸€å€‹stringï¼Œæˆ‘å€‘å¸¸èªªä¿®æ”¹çš„macæŒ‡çš„æ˜¯ä¿®æ”¹é›»è…¦è¨»å†Šè¡¨ä¸­çš„ç´€éŒ„ã€‚ OpenFlow: Flow Table Entries operates between controller, switch.\nApplication Layer HTTP ( Hyper Text Transfer Protocol ) Uses TCP; stateless. non-persistent HTTP â¡ at most one object sent over TCP connection,connection then closed. persistent HTTP â¡ multiple objects can be sent over single TCP connection between client, server. HTTP response time = 2RTT (å»ºç«‹TCPé€£ç·šã€è«‹æ±‚å’Œæ¥æ”¶ç‰©ä»¶)+ file transmission time\nserverå¸Œæœ›èƒ½è­˜åˆ¥ä½¿ç”¨è€…èº«åˆ†æä¾›ä¸åŒçš„å…§å®¹ï¼Œå› HTTPæ˜¯statelessï¼Œæ‰€ä»¥HTTPä½¿ç”¨cookiesã€‚\nçµåˆcookieå’Œuseræ‰€æä¾›çš„å¸³è™Ÿè³‡è¨Šï¼Œwebsiteèƒ½ç²å¾—å¤§é‡ä½¿ç”¨è€…çš„ç›¸é—œè³‡æ–™ï¼Œæœ‰å¯èƒ½è²©è³£é€™äº›è³‡è¨Š(å®‰å…¨ç–‘æ…®)\nWeb cache = proxy server ( server for original requesting clientã€client to origin server )\nproxy servers reduce response time for client request. proxy servers reduce traffic on an institutionâ€™s access link. Electronic Mail SMTP ( Simple Mail Transfer Protocol ) between mail servers to send email messages.\nTCP /port 25 use persistent connections. DNS ( Domain Name System ) A distributed, hierarchical database. Translate host name to IP address. ( UDP port/53 )\nroot DNS serverã€ TLD DNS server ( .com/.org/.edu/.gov )ã€ authoritative DNS server /au.thor.i.ta.tive/ Local DNS name server: each ISP (residential ISP, company, university) has one = DNS caching\nvideo streaming and content distribution networks (CDNs) DHCP ( Dynamic Host Configuration Protocol ï¼‰ ä¸»è¦æ˜¯ç”¨ï¤­æä¾›åœ¨TCP/ IPç¶²ï¤·ä¸Šçš„ä¸»æ©Ÿå¯ä»¥è‡ªå‹•çš„åˆ†é…åˆ°IPåŠæ‰€éœ€è¦çš„ç›¸é—œè¨­å®šã€‚ DHCPå¯åˆ†æˆï¥¸å€‹éƒ¨åˆ†ï¤­çœ‹ï¼Œä¸€å€‹æ˜¯DHCPä¼ºæœå™¨ç«¯ï¼Œå¦ä¸€å€‹æ˜¯DHCPç”¨æˆ¶ç«¯ã€‚\nDHCP serveræœ‰ä¸€å€‹é›†ä¸­å¼çš„ç®¡ï§¤ç¨‹å¼ï¼Œä¸»è¦è² è²¬è¨­å®šç¶²ï¤·å„ä¸»æ©Ÿä¸Šæ‰€éœ€è¦çš„IPè³‡è¨Šï¼Œä¸¦ æä¾›çµ¦Clientï¥ªå–ä½¿ç”¨ã€‚DHCPç”¨æˆ¶ç«¯æ˜¯è² è²¬å‘DHCPä¼ºæœå™¨ï¥ªå–æ‰€éœ€è¦ä¹‹ç›¸é—œIPè³‡è¨Šï¼Œä¸¦å°‡è³‡ï¦¾è¨»å†Šåˆ°è©²ç³»çµ±ä¸­ã€‚\nSockets Transport Layer what transport service does an app need?\ndata integrity timing throughput security TCP DEF â¡ reliable transportã€flow controlã€connection-oriented doesnâ€™t provide â¡ timing, minimum throughput guarantee, security\nTCPçš„å¢å¼·ç‰¹æ€§ Fast Retransmit \u0026 Recovery ï¼ˆFRRï¼‰ï¼Œç•¶receiverç™¼ç¾ä¸ŸåŒ…æ™‚ï¼Œç™¼é€é‡è¤‡çš„ACKçµ¦å°æ–¹ï¼Œç•¶senderæ”¶åˆ°3å€‹é‡è¤‡çš„ackæ™‚ï¼Œå°±ç¢ºäººæ­¤packetç‚ºlossï¼Œé¦¬ä¸Šé€²è¡Œé‡å‚³(ä¸éœ€ç­‰å¾…time out)\nç‚ºï¦ºåœ¨ï¥§å¯é çš„ç¶²ï¤·ä»‹é¢ä¸Šå»ºï§·å¯é çš„å‚³é€è³‡ï¦¾æœå‹™ï¼ŒTCPå¿…é ˆè§£æ±ºå¯é æ€§ï¼Œflow controlçš„å•é¡Œï¼Œè€Œä¸”å¿…é ˆèƒ½ç‚ºä¸Šå±¤çš„æ‡‰ç”¨ç¨‹å¼ï¤­æä¾›å¤šå€‹åŸ å£ï¼Œç”¨ï¤­åŒæ™‚ç‚ºå¤šå€‹æ‡‰ç”¨ç¨‹å¼æä¾›è³‡ï¦¾ï¼ŒåŒæ™‚ï¼ŒTCPå¿…é ˆè§£æ±ºï¦šæ¥çš„å•é¡Œï¼Œé€™æ¨£å­çš„è©±ï¼ŒTCPæ‰æ˜¯å€‹å¯é çš„é€šè¨Šå”å®šï¼Œè€Œæœ€å¾Œä¹Ÿè¦å…‹æœé€šè¨Šå®‰å…¨çš„å•é¡Œã€‚ TCPï¦šæ¥æ˜¯å¯é çš„ï¼Œè€Œä¸”ä¿è¨¼ï¦ºå‚³é€å€æ®µçš„é †åºï¼Œä¿è¨¼é †åºçš„èƒ½ï¦Šæ˜¯ç”¨ä¸€å€‹åºè™Ÿï¤­é”æˆçš„ï¼Œå€æ®µå…§ä¹ŸåŒ…æ‹¬ä¸€å€‹åºï¦œè™Ÿï¼Œè¡¨ç¤ºæ¥æ”¶æ–¹æº–å‚™å¥½é€™å€‹åºè™Ÿçš„å€æ®µï¼Œåœ¨TCPå”å®šå‚³é€ä¸€å€‹å€æ®µæ™‚ï¼Œå®ƒæœƒåŒæ™‚æŠŠé€™å€‹å€æ®µæ”¾å…¥é‡æ–°ç™¼é€çš„åºï¦œä¸­ï¼ŒåŒæ™‚å•Ÿå‹•è¨ˆï¥©å™¨ï¼Œå¦‚æœæ”¶åˆ°ï¦ºç¢ºèªè¨Šæ¯ï¼Œå°±æœƒæŠŠé‡é€çš„å€æ®µåºï¦œåˆªé™¤ï¼Œå¦‚æœè¶…éè¨ˆï¥©æ™‚é–“æ™‚ï¼Œå°±æœƒå°‡é€™å€‹å€æ®µé‡é€ã€‚ Sliding Window: data flow controlçš„æŠ€å·§ï¼Œå®ƒè¦æ±‚sender hoståœ¨å‚³é€ä¸€å®šé‡çš„dataä»¥å¾Œï¼Œå¿…é ˆæ¥æ”¶å°æ”¾çš„ç¢ºèªã€‚ Window Sizeæ˜¯ç”±destinationæ±ºå®šï¼Œè€Œä¸”æœƒä¾ç¶²ï¤·ï§Šï¥¾èª¿æ•´ä¸¦éä¸€æˆï¥§è®Š(maybe congestion)ï¼ŒThe destination can send an acknowledgment at any timeã€‚\nTCP socket identified by 4-tuple:\nâ€¢ source IP address â€¢ source port number â€¢ dest IP address â€¢ dest port number\nDemux (ç”±ä¸‹åˆ°ä¸Šå‚³åˆ°socket): receiver uses all four values to direct segment to appropriate socket. each socket identified by its own 4-tuple. (ä¸åŒçš„source ip address or port numberï¼Œå°±æœƒè½‰äº¤çµ¦å…©ä»½ä¸åŒçš„socket)\nTCP congestion control flow control â¡ receiver æ§åˆ¶senderåˆ¥é€å¤ªå¤š (Receive Window)\ncwnd (Congestion Window, bytes) â¡ é™åˆ¶TCP senderè³‡æ–™é€å…¥ç¶²è·¯çš„é€Ÿç‡ï¼Œç‚ºäº†é¿å…congestionï¼Œå€¼æ‡‰è©²éƒ½\u003c cwndã€‚\nrate = cwnd (é‡) / RTT bytes/sec ssthresh = cwnd / 2\nMSS: ( Maximum Segment Size ) â¡ MSSæ˜¯TCPæ•¸æ“šåŒ…æ¬¡èƒ½å¤ å‚³è¼¸çš„æœ€å¤§æ•¸æ“šåˆ†æ®µã€‚å»ºç«‹é€£ç·šä¹‹å‰é›™æ–¹è¬›å¥½ï¼Œå› TCPç‚ºé›™å‘é€£ç·šï¼Œæ‰€ä»¥å…©é‚Šå‚³éä¹‹æœ€å¤§å€¼å¯ä»¥ä¸ä¸€æ¨£\nçˆ²äº†é”åˆ°æœ€ä½³çš„å‚³è¼¸æ•ˆèƒ½ï¼ŒTCPå”è­°åœ¨å»ºç«‹é€£æ¥çš„æ™‚å€™é€šå¸¸è¦å”å•†é›™æ–¹çš„MSSå€¼ï¼Œé€™å€‹å€¼TCPå”è­°åœ¨å¯¦ç¾çš„æ™‚å€™å¾€å¾€ç”¨MTUå€¼ä»£æ›¿ï¼ˆéœ€è¦æ¸›å»IPæ•¸æ“šåŒ…åŒ…é ­çš„å¤§å°20Byteså’ŒTCPæ•¸æ“šæ®µçš„åŒ…é ­20Bytesï¼‰æ‰€ä»¥ä¸€èˆ¬MSSå€¼1460ï¼Œé€šè¨Šé›™æ–¹æœƒæ ¹æ“šé›™æ–¹æä¾›çš„MSSå€¼å¾—æœ€å°å€¼ç¡®å®šçˆ²é€™æ¬¡é€£æ¥çš„æœ€å¤§MSSå€¼ã€‚\nSlow Start â¡ initial.cwnd = 1MSSï¼Œæ¯ç•¶receiverå¾—åˆ°ä¸€æ¬¡ç¢ºèªå¾Œå°±å¢åŠ  1 MSS (å„å°‡cwnd+1ï¼Œdouble cwnd)ï¼Œ æ­¤ä¸€éç¨‹é€ æˆæ¯å›RTTä¸­å‚³é€é€Ÿç‡å€å¢ï¼Œå› æ­¤TCPçš„å‚³é€é€Ÿç‡å¾ä½é€Ÿé–‹å§‹ï¼Œæ¥ä¸‹ä¾†æœƒä»¥æŒ‡æ•¸æ€§åœ°æˆé•·ã€‚\næŒ‡æ•¸æˆé•· cwnd = cwnd + 1 å‡º2å›2 å‡º4å›4 å‡º8å›8ï¼Œå‚³çš„å–®ä½æ˜¯per ackï¼Œæ¯æ¬¡å›ä¾†å¹¾å€‹ackå°±+1å¹¾æ¬¡ã€‚\nSuccess Event\nincrease exponentially (new ack) Slow start to congestion avoidance, cwnd gets to 1/2 of its value before timeout (when cwnd \u003e= ssthresh) Loss Event ( timeout )\ncut cwnd = 1 MSS. ssthresh = cwnd / 2 Congestion Avoidance â¡ ç·šæ€§æˆé•· cwnd = cwnd+1 (cwnd = cwnd + MSS * (MSS / cwnd) )\ncwndå…¨æ”¶å®Œackï¼Œæ•´å€‹cwndæ‰+1ã€‚\nFast Recovery â¡ senderé‡è¤‡æ”¶åˆ°3æ¬¡ç›¸åŒackæ™‚ï¼Œå¯èƒ½æ˜¯packet lossäº†ï¼Œ\nç•¶æ”¶åˆ°ä¸‰å€‹é‡è¤‡çš„ACKRenoå°±æœƒèªçˆ²ä¸¢åŒ…äº†ï¼Œå¹¶èªå®šç¶²çµ¡ä¸­ç™¼ç”Ÿäº†æ“å¡ã€‚RenoæœƒæŠŠç•¶å‰çš„ssthreshçš„å€¼è¨­ç½®çˆ²ç•¶å‰cwndçš„ä¸€åŠï¼Œä½†æ˜¯å¹¶ä¸æœƒå›åˆ°slow startéšæ®µï¼Œè€Œæ˜¯å°†cwndè¨­ç½®çˆ²ï¼ˆæ›´æ–°å¾Œçš„ï¼‰ssthresh+3MSSï¼Œä¹‹å¾Œcwndå‘ˆç·šæ€§å¢é•·ã€‚\nTCP New Reno NewRenoæ˜¯åŸºæ–¼Renoçš„æ”¹é€²ç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯æ”¹é€²äº†Fast Recoveryã€‚\nNewRenoéœ€è¦æ”¶åˆ°è©²çª—å£å†…æ‰€æœ‰æ•¸æ“šåŒ…çš„ç¡®èªå¾Œæ‰æœƒé€€å‡ºå¿«é€Ÿæ¢è¤‡ç‹€æ€ï¼Œå¾è€Œæ›´ä¸€æ­¥æé«˜ååé‡ã€‚\nTCP SACK TCP SACKåœ¨TCP RenoåŸºç¤ä¸Šå¢åŠ äº†ï¼š\né¸æ“‡ç¡®èªï¼ˆSelective Acknowledgementsï¼ŒSACKï¼‰ é¸æ“‡é‡å‚³ï¼ˆSelective Retransmissionï¼‰ SACKå°±æ˜¯æ”¹è®ŠTCPçš„ç¢ºèªæ©Ÿåˆ¶ï¼Œæœ€åˆçš„TCPéš»ç¢ºèªç•¶å‰å·²é€£çºŒæ”¶åˆ°çš„æ•¸æ“šï¼ŒSACKå‰‡æŠŠäº‚åºç­‰ä¿¡æ¯æœƒå…¨éƒ¨å‘Šè¨´å°æ–¹ï¼Œå¾è€Œæ¸›å°‘æ•¸æ“šç™¼é€æ–¹é‡å‚³çš„ç›²ç›®æ€§ã€‚æ¯”å¦‚èªªåºè™Ÿ1ï¼Œ2ï¼Œ3ï¼Œ5ï¼Œ7çš„æ•¸æ“šæ”¶åˆ°äº†ï¼Œé‚£éº¼æ™®é€šçš„ACKéš»æœƒç¢ºèªåºåˆ—è™Ÿ4ï¼Œè€ŒSACKæœƒæŠŠç•¶å‰çš„5ï¼Œ7å·²ç¶“æ”¶åˆ°çš„ä¿¡æ¯åœ¨SACKé¸é …è£é¢å‘ŠçŸ¥å°ç«¯ï¼Œå¾è€Œæé«˜æ€§èƒ½ï¼Œç•¶ä½¿ç”¨SACKçš„æ™‚å€™ï¼ŒNewRenoç®—æ³•å¯ä»¥ä¸ä½¿ç”¨ï¼Œå› çˆ²SACKæœ¬èº«æ”œå¸¶çš„ä¿¡æ¯å°±å¯ä»¥ä½¿å¾—ç™¼é€æ–¹æœ‰è¶³å¤ çš„ä¿¡æ¯ä¾†çŸ¥é“éœ€è¦é‡å‚³å“ªäº›åŒ…ï¼Œè€Œä¸éœ€è¦é‡å‚³å“ªäº›åŒ…ã€‚\nTCP ECN ( Explicit Congestion Notification ) ECN = 11 = routerå·²é‡åˆ°æ“å¡ç‹€æ³ ç•¶routerå°‡ IP paecketçš„ ECN æ¬„ä½è¨­å®šç‚º 11 æ™‚ï¼Œreceiverå°±æœƒæ¥åˆ°è·¯å¾‘ä¸­congestionçš„é€šçŸ¥ã€‚ECN ä½¿ç”¨ TCP headerå‘å‚³é€ç«¯æŒ‡å‡ºç¶²è·¯æ­£é‡åˆ°æ“å¡ç‹€æ³ï¼ŒåŒæ™‚å‘æ¥æ”¶ç«¯æŒ‡å‡ºå‚³é€ç«¯å·²ç¶“å¾æ¥æ”¶ç«¯æ¥åˆ°æ“å¡æŒ‡æ¨™ï¼Œä¸¦ä¸”é™ä½å‚³è¼¸é€Ÿç‡ã€‚\nreceiver sets ECE bit on receiver-to-sender ACK segment to notify sender of congestion\nTCP Vegas Vegaså°‡RTTçš„å¢åŠ ä½œç‚ºcongestion networkçš„ä¿¡è™Ÿï¼ŒRTTå¢åŠ (cwndæ¸›å°)ã€RTTæ¸›å°(cwndå¢åŠ )ã€‚ Vegas é€šéæ¯”è¼ƒå¯¦éš›throughputå’Œexpect throughputä¾†èª¿ç¯€cwndçš„å¤§å°ã€‚\næœŸæœ›ååé‡ï¼šExpected = cwnd / BaseRTT (RTT lowest)ã€‚ å¯¦éš›ååé‡ï¼šActual = cwnd / RTTã€‚ â€“ Diff = ExpectedRate â€“ ActualRate. â€“ if Diff \u003c a . increase CongestionWindow linearly. â€“ else if Diff \u003e b. decrease CongestionWindow linearly. â€“ Else. leave CongestionWindow unchanged.\nç¶²çµ¡ä¸­ Vegas èˆ‡å…¶å®ƒç®—æ³•å…±å­˜çš„æƒ…æ³ä¸‹ï¼ŒåŸºæ–¼ä¸ŸåŒ…çš„æ“å¡æ§åˆ¶ç®—æ³•æœƒå˜—è©¦å¡«æ»¿ç¶²çµ¡ä¸­çš„ç·©æ²–å€ï¼Œå°ç·» Vegas è¨ˆç®—çš„ RTT å¢å¤§ï¼Œé€²è€Œé™ä½æ“å¡çª—å£ï¼Œä½¿å¾—å‚³è¼¸é€Ÿåº¦è¶Šä¾†è¶Šæ…¢ï¼Œå› æ­¤ Vegas æœªèƒ½åœ¨ Internet ä¸Šæ™®éæ¡ç”¨ã€‚\nAIMD: TCP senderæ”¶åˆ°ACKï¼ŒæˆåŠŸcwnd + 1ï¼Œå¤±æ•—cwnd = cwnd / 2 (åŠ æ€§å¢ï¼Œä¹˜æ€§æ¸›) Linear decrease in Vegas does not violate AIMD since it Happens before packets loss.\ntcp vegas / reno: Fast Retransmit â¡ Fast Recovery\nRandowm Early Detection (RED) Routeræ‰€æ¡è¨±çš„ä¸€ç¨®ç­–ç•¥ï¼Œé€équeueå¹³å‡é•·åº¦ä¾†detect congestion (AvgLen)ï¼Œè¨ˆç®—ä¸¢æ£„çš„æ¦‚ç‡ä¾†discard packet.\nRED is good at keeping avg. queue size steady. Thresholds are hard to determine.\nSequence Number TCPä»¥å‘å‰ï¥«ç…§ç¢ºèªï¤­æä¾›å€æ®µæ’åºä½œæ¥­ï¼Œæ¯å€‹è³‡ï¦¾åœ¨å‚³è¼¸å‰ï¨¦æœƒå…ˆåŠ ä»¥ç·¨è™Ÿï¼Œåˆ°ç›®çš„åœ°å·¥ä½œç«™æ™‚ï¼ŒTCPæœƒå°‡é€™äº›å€æ®µé‡æ–°çµ„æˆå®Œæ•´çš„è¨Šæ¯ã€‚ï¥´è³‡ï¦¾ä¸­å°‘ï¦ºæŸå€‹é †åºè™Ÿç¢¼ï¼Œå°±æœƒé‡å‚³è©²å€æ®µã€‚å€æ®µå‚³å‡ºå¾Œï¼Œï¥´åœ¨ä¸€æ®µç‰¹å®šæ™‚é–“å…§æ²’æœ‰æ”¶åˆ°ç¢ºèªï¼Œä¹Ÿæœƒè¦æ±‚é‡å‚³ã€‚\nUDP (best effort) DEF â¡ unreliable data transfer doesnâ€™t provide â¡ reliabilityã€flow controlã€congestion controlã€timingã€ throughput guaranteeã€securityã€connection setup(handshaking)\nNetwork Layer Router examines header fields in all IP datagrams passing through it. Two key functions:\nforwarding ( data plane ): move packets from routerâ€™s input to appropriate router output. (æ€éº¼è½‰é€) routing ( control plane ): determine route taken by packets from source to destination. (è·¯æ€éº¼èµ°) Router Architecture Longest prefix matching: when looking for forwarding table entry for given destination address, use longest address prefix that matches destination address.\nSwitching fabrics: transfer packet from input buffer to appropriate output buffer.\néšŠé ­é˜»å¡ï¼ˆHead-of-line blockingæˆ–ç¸®å¯«ç‚ºHOL blockingï¼‰: å®ƒçš„åŸå› æ˜¯ä¸€åˆ—çš„ç¬¬ä¸€å€‹æ•¸æ“šåŒ…ï¼ˆéšŠé ­ï¼‰å—é˜»è€Œå°ç·»æ•´åˆ—æ•¸æ“šåŒ…å—é˜»ã€‚ä¾‹å¦‚å®ƒæœ‰å¯èƒ½åœ¨ç·©å­˜å¼è¼¸å…¥çš„äº¤æ›æ©Ÿä¸­å‡ºç¾ï¼Œæœ‰å¯èƒ½å› ç‚ºå‚³è¼¸é †åºéŒ¯äº‚è€Œå‡ºç¾ï¼Œäº¦æœ‰å¯èƒ½åœ¨HTTPæµæ°´ç·šä¸­æœ‰å¤šå€‹è«‹æ±‚çš„æƒ…æ³ä¸‹å‡ºç¾ã€‚\nIPv4 DEF â¡ 10.100.122.2è¢«é»åˆ†å‰²ç‚º4å€‹éƒ¨åˆ†(Byte)ï¼Œæ¯å€‹Byte = 8å€‹bitï¼Œæ‰€ä»¥ipv4ç‚º32 bit addressã€‚ ç”± 0é–‹é ­ åˆ° 127çµå°¾çš„IP æ˜¯ A Class ç”± 128é–‹é ­ åˆ° 191çµå°¾çš„IPæ˜¯ B Class ç”± 192é–‹é ­ åˆ° 223çµå°¾çš„å‰‡ç‚º C Class\nPrivate Addresses Net IDã€Host IDèˆ‡Mask DEF â¡ å®šç¾©èˆ‡åˆ‡å‰²ç¶²è·¯ç”¨é€”ï¼Œä¸åŒé¡å‹çš„IPæœƒå°æ‡‰åˆ°æœ‰è‘—ä¸åŒçš„Net_IDã€‚ A Classçš„IP / default mask : å‰é¢1 byteæ•¸å­— = Net IDï¼Œå…¶é¤˜ä¸‰çµ„ = Host ID / 255.0.0.0 B Classçš„IP / default mask: å‰é¢2 byteæ•¸å­— = Net IDï¼Œå¦å…©çµ„ = Host ID / 255.255.0.0 C Classçš„IP / default mask: å‰é¢3 byteæ•¸å­— = Net IDï¼Œå‰©ä¸‹çš„ä¸€çµ„ = Host / 255.255.255.0\nQ: 132.21.0.0, find the class, the block, and the range of the addresses? A: The class is B. The block has a Net_ID of 132.21. The addresses range from 132.21.0.0 to 132.21.255.255.\nSupernet (CIDR)èˆ‡ Subnet Supernet â¡ åˆ©ç”¨ Subnet Mask é‡æ–°å®šç¾©è¼ƒçŸ­çš„Net IDï¼Œå€Ÿç”¨Net IDå¾Œé¢å¹¾å€‹bitã€‚ Subnet â¡ åˆ©ç”¨ Subnet Mask é‡æ–°å®šç¾©è¼ƒé•·çš„Net IDï¼Œå€Ÿç”¨Host IDå‰é¢å¹¾å€‹bitï¼Œå¾Œé¢ç•¶ä½œå­ç¶²è·¯çš„host addressã€‚ **Host_Idä¹‹maskåˆ‡æ³•: çœ‹è¦å¹¾å€‹sub-net(åˆ‡å¹¾å€‹1å‡ºå»)ï¼Œå‰©ä¸‹0ç‚ºè©²sub-netä¸‹å¯ä½¿ç”¨çš„ip addresså€‹æ•¸ã€‚ **å³ç§» Net_Idä¹‹maskåˆ‡æ³•: çœ‹è¦å¹¾å€‹class(åˆ‡å¹¾å€‹0å‡ºå») å·¦ç§» 205.16.37.24/29 : 8 addresses in the block. mask address: 255.255.255.X\ndestination AND mask = supe\trnet/subnet address.\nä»¥network blockè·Ÿnetwork blockä¹‹é–“ç‚ºç‚ºå–®ä½é€²è¡Œåˆ†å‰²ã€‚\nQ: 201.70.64.0, need 6 subnets. Design the subnets A: 8 -3 = 5(host_id_0s) subnetså…±8å€‹. The number of address in each subnet is 32 = ä»£è¡¨1å€‹subnetä¸­(ç¸½å…±8å€‹)ï¼Œå¯å®¹ç´32å€‹ä¸åŒçš„host ip address\nQ: We need to make a supernetwork out of 16 class C blocks. What is the supernet mask? A: 11111111 11111111 11110000 00000000 ( net_idå·¦ç§»4 bit )ã€‚\nDelivery and Routing of IP Packets Routing IP Packets Policy: Direct delivery â¡ Host-specific â¡ Network-specific â¡ Default indirect delivery: destination is in another network. If not present, use direct delivery. Host-specific: the entry in the destination field is host-specific address. If not present, destination field is network-specific address.\nnext-hopç‚ºè©²hoståˆ°é¡Œç›®æŒ‡å®šrouterçš„å‰ä¸€å€‹router input ip address (åˆ°é¡Œç›®æŒ‡å®šrouter)ã€‚\nIPv6 other changes from IPv4:\nchecksum: removed entirely to reduce processing time at each hop options: allowed, but outside of header, indicated by â€œNext Headerâ€ field ICMPv6: new version of ICMP IP Packet IP packet = header(æ§åˆ¶è³‡è¨Š) + payload(è³‡æ–™æœ¬èº«) IP Header(æœ€çŸ­20ã€æœ€å¸¸60): é•·åº¦ç‚º4 Bytesçš„å€æ•¸ IP Payload(æœ€çŸ­8ã€æœ€å¸¸65515)\nHLEN = Header Length(ä½”4 bits)ï¼Œç´€éŒ„æ­¤IP headerçš„é•·åº¦ï¼ŒHLENçš„è¨ˆç®—æ˜¯ä»¥4 Bytesç‚ºåŸºæœ¬å–®ä½ã€‚ï¦µå¦‚ï¼šHLENï¤ä½å€¼ç‚º0101ï¼Œå³ä»£è¡¨IP headerçš„é•·ï¨ç‚º5 Ã—4 = 20 Bytesï¼Œæœ€é•·å¯é”15Ã—4 = 60 Bytes\nIdentification (16 bits) â¡ ï¥´packetåœ¨å‚³è¼¸éç¨‹ä¸­å› ç‚ºMTUçš„é™åˆ¶ï¼Œå°è‡´å‚³è¼¸éç¨‹ä¸­ï¼Œå°‡packetï¨€å‰²æˆå¹¾å€‹Fragmentsé€²è¡Œå‚³é€ï¼Œè€Œå› ç‚ºæ¯å€‹IP packetåˆ°é”ç›®çš„è£ç½®çš„å…ˆå¾Œé †åºå¯èƒ½èˆ‡å‡ºç™¼æ™‚çš„é †åºï¥§åŒï¼Œå› æ­¤æ¥æ”¶ç«¯åœ¨é€²ï¨ˆpacketé‡çµ„æ™‚ï¼Œï¥¥å¿…é ˆä»¥Identificationé€²ï¨ˆåˆ¤æ–·IP packetåŸï¤­çš„é †åºï¼Œä»¥ï¥¥èƒ½å°‡å±¬æ–¼ç›¸åŒè³‡ï¦¾packetçš„fragmentçµ„åˆåœ¨ä¸€èµ·ã€‚\nTotal Length (16 bits) â¡ è¨˜ï¤¿æ•´å€‹packetçš„é•·ï¨ï¼ŒåŒ…å«IP headeråŠIPæ‰€å¸¶è³‡ï¦¾å…§å®¹çš„ç¸½å’Œã€‚\nProtocol: which protocol to use.\nTime To Liveï¼ˆå­˜æ´»æ™‚é–“ï¼‰â¡ ä½”8 Bitsï¼Œè¨˜ï¤¿IPå°åŒ…çš„ã€Œå­˜æ´»æ™‚é–“ã€ï¼Œä»¥é™åˆ¶IPå°åŒ…åœ¨ï¤·ç”±å™¨ä¹‹é–“è½‰é€çš„æ¬¡ï¥©ã€‚ç•¶IPå°åŒ…æ¯ç¶“éä¸€éƒ¨ï¤·ç”±å™¨æ™‚ï¼Œï¤·ç”±å™¨ï¥¥æœƒå°‡Time to Liveï¤ä½å€¼æ¸›1ï¼Œç•¶ï¤·ç”±å™¨æ”¶åˆ°æ­¤ï¤ä½å€¼ç‚º1çš„IPå°åŒ…æ™‚ï¼Œï¥¥ç›´æ¥å°‡ä¹‹ä¸Ÿæ£„ï¼Œï¥§å†è½‰é€ã€‚\nFlagï¼ˆå°åŒ…ï¨€å‰²æ——æ¨™ï¼‰â¡ ä½”3 Bitsï¼Œä¸»è¦å°IPå°åŒ…çš„ï¨€å‰²æä¾›æ§åˆ¶è¨Šæ¯ã€‚ ç¬¬1å€‹bit: æœªå®šç¾©ã€‚ ç¬¬2å€‹bit: D æ˜¯å¦å¯ä»¥åˆ‡å‰² ç¬¬3å€‹bit: M 0 = æœ€å¾Œfragmentationï¼Œ1 = å°šæœ‰å…¶ä»–fragmentationã€‚ If the M bit is 0, it means that there are no more fragments If the M bit is 1, it means that there is at least one more fragment\nIP Packetåˆ‡å‰²èˆ‡é‡çµ„ routerä¸­å¿…é ˆæœ‰IP packetçš„åˆ‡å‰²èˆ‡é‡çµ„æ©Ÿåˆ¶ï¼Œå³æ˜¯å°‡éé•·çš„packetåŠ ä»¥åˆ‡å‰²ï¼Œä»¥ä¾¿èƒ½åœ¨MTUè¼ƒå°çš„ç¶²è·¯ä¸Šå‚³è¼¸ã€‚ï¨€å‰²å¾Œçš„IPå°åŒ…ï¼Œæœƒç”±ç›®çš„è£ç½®é‡çµ„ï¼Œæ¢ï¥¦æˆåŸï¤­IPå°åŒ…çš„æ¨¡æ¨£ã€‚\nIP æœƒå°‡å°åŒ…åˆ‡å‰²æˆå¤šå€‹è¼ƒå°çš„ (å°æ–¼ MTU) fragmentï¼Œä½¿å…¶èƒ½é€édata-linkå‚³è¼¸ ï¼Œ ç›®çš„ç«¯æ¥æ”¶å®Œæ‰€æœ‰fragmentå¾Œï¼Œå†å°‡fragmenté€²è¡Œé‡çµ„ã€‚\nIP Fragmentationä¸­IPv4 èˆ‡ IPv6ï¼Œå…¶å°åŒ…å¤§å°ä¸Šé™ï¼Œåˆ†åˆ¥ç‚º 65535 èˆ‡ 65575 Bytesã€‚ é é è¶…å‡ºäº†data-linkçš„frameå¤§å°ã€‚\nMTU ( Maximum Transmission Unit ) DEF â¡ data-linkä¸­çš„MTUè¦ç¯„äº†frameçš„å¤§å°ä¸Šé™ã€‚ ä¹™å¤ªç¶²è·¯ (Ethernet) ä¸­çš„MTU: 1500 å€‹ä½å…ƒçµ„ã€‚\nICMP ( Internet Control Message Protocol ) pingæ˜¯åŸºæ–¼ICMPå®Œæˆçš„ã€‚å®ƒçš„ç›®çš„å°±æ˜¯è®“æˆ‘å€‘èƒ½å¤ æª¢æ¸¬ç¶²ï¤·çš„ï¦šç·šï§ºæ³ï¼Œä¹Ÿèƒ½ç¢ºä¿ï¦šç·šçš„æº–ç¢ºæ€§ï¼Œï¥§éç”±æ–¼åƒ…æ˜¯æ§åˆ¶è¨Šæ¯çš„å‚³éä¸¦ç„¡è©³ç´°çš„æŒ‡å°ï¼Œæ‰€ä»¥ä¸€èˆ¬è€Œè¨€ï¤­æºç«¯ä¸¦ï¥§è™•ï§¤è©²è¨Šæ¯\nARP ( Address Resolution Protocol ) DEF â¡ å·²çŸ¥IP addressï¼Œæ±‚MAC addressçš„protocolï¼Œåˆ©ç”¨ã€Œå¼ã€çš„æ–¹å¼ã€‚ç™¼é€ä¸€å€‹broadcast packetï¼Œèª°æ˜¯é€™å€‹IPèª°ä¾†å›ç­”ã€‚switchæœƒè¨˜ä½ç™¼ä¾†è«‹æ±‚çš„senderçš„mac addressï¼Œè€Œswitchå­¸ç¿’åˆ°çš„çµæœç¨±ç‚ºforwarding table(æœ‰éæœŸæ™‚é–“)ã€‚\nRouting Protocol RIP ( Routing Information Protocol ) RIP version 2 supports CIDR. RIP uses the services of UDP on well-known port 520. OSPF ( Open Shortest Path First ) ç”±æ–¼OSPFè·¯ç”±å”å®šçš„ç”¢ç”Ÿï¼Œæ˜¯ç‚ºäº†è§£æ±ºRIPè·¯ç”±å”å®šçš„è¨­å‚™æ•¸é‡çš„å•é¡Œï¼Œæ‰€ä»¥OSPFè·¯ç”±å”å®šå°±æ²’æœ‰è¨­å‚™æ•¸é‡ï¼ˆHop Countï¼‰çš„é™åˆ¶ã€‚æœƒä½¿ç”¨LSAçš„æ–¹å¼èˆ‡å…¶ä»–è·¯ç”±å™¨è¨­å‚™äº¤æ›è³‡è¨Šï¼Œè€Œä¸åªæ˜¯Routing Tableçš„æ›´æ–°è³‡è¨Šè€Œå·²ã€‚æ¯ä¸€å°è·¯ç”±å™¨è¨­å‚™æœƒè‡ªè¡Œè¨ˆç®—å±¬æ–¼è‡ªå·±çš„ã€Œæœ€ä½³ç¶²è·¯è·¯å¾‘ã€ï¼Œè€Œé€™æ¨£çš„è³‡è¨Šåœ¨å„å€‹è·¯ç”±å™¨è¨­å‚™ä¹‹é–“æ˜¯ä¸å®Œå…¨ç›¸åŒçš„ã€‚ä¸€å€‹LSAå°åŒ…ä¸­åŒ…å«äº†ä»‹é¢çš„è³‡è¨Šã€æ‰€ä½¿ç”¨çš„ç¶²è·¯è·¯å¾‘è©•åˆ¤æ¨™æº–ï¼ˆMetricï¼‰ä»¥åŠå…¶ä»–ç›¸é—œçš„è³‡è¨Šã€‚ç•¶ç„¶ï¼Œé—œæ–¼è·¯å¾‘çš„é¸æ“‡ï¼ŒOSPFè·¯ç”±å”å®šæ˜¯æ¡ç”¨æœ€çŸ­è·¯å¾‘å„ªå…ˆæ¼”ç®—æ³•ï¼ˆShortest Path First Algorithmï¼‰ã€‚\næ¯ä¸€å°è·¯ç”±å™¨è¨­å‚™æœƒè‡ªè¡Œè¨ˆç®—å±¬æ–¼è‡ªå·±çš„ã€Œæœ€ä½³ç¶²è·¯è·¯å¾‘ã€ï¼Œè€Œé€™æ¨£çš„è³‡è¨Šåœ¨å„å€‹è·¯ç”±å™¨è¨­å‚™ä¹‹é–“æ˜¯ä¸å®Œå…¨ç›¸åŒçš„ã€‚\nIn OSPF, all routers have the same link state database. OSPF packets are encapsulated in IP datagrams. Autonomous System: ç”±ä¸€å€‹å–®ä½ç®¡ç†ï¼Œä¾‹å¦‚ ISPã€è¶…ç´šå¤§å­¸æ ¡ã€å¤§å…¬å¸ç­‰ç­‰ï¼Œä»€éº¼éƒ½å¤§çš„çµ„ç¹”ã€‚æ¯å€‹ AS è£¡é¢çš„è·¯ç”±è¡¨éƒ½è‡ªå·±ç®¡ï¼Œéš»è¦äº‹å…ˆå®£å‘Šè‡ªå·±æŒæœ‰ä»€éº¼ç¶²æ®µå°±è¡Œäº†ã€‚\nBGP ( Border Gateway Protocol ) routing among the ISPs ï¼ŒBGPæœƒè‡ªå‹•æ±ºå®šå„ç¨®ç‹€æ…‹ä¸‹çš„routerï¼Œæ±ºå®šæ±è¥¿å¾å“ªé‚Šèµ°ï¼Œè©²åœ¨å“ªé‚Šåœ(å¤–éƒ¨ç¶²è·¯ä¸‹)ã€‚ ç¶­è­·router tableä¾†å¯¦ç¾ASä¹‹é–“çš„å¯é”æ€§ã€‚\nSimple Network Management Protocol (SNMP ) = ç°¡å–®ç¶²è·¯ç®¡ç†å”å®šä¸€æ–¹é¢ä¸åƒ…å¯ä½¿ç”¨æ–¼ç¶²è·¯è¨­å‚™ä¹‹æ—¥å¸¸ç¶­é‹ä½œæ¥­ï¼Œäº¦å¯æä¾›ç¶²è·¯ç¶­é‹äººå“¡å³æ™‚ç›£æ§è¨­å‚™ç•°å¸¸äº‹ä»¶ç™¼ç”ŸåŠå› æ‡‰è™•ç†ã€‚\nå…¶ä»– HUB(é›†ç·šå™¨) DEF â¡ å®Œå…¨åœ¨physical layerå·¥ä½œï¼Œå®ƒæœƒå°‡è‡ªå·±æ”¶åˆ°çš„æ¯ä¸€å€‹byteï¼Œéƒ½è¤‡è£½åˆ°å…¶ä»–portä¸Šå»ã€‚ ç¼º: ä¸ç®¡æŸå€‹ä»‹é¢æ˜¯å¦éœ€è¦ï¼Œæ‰€æœ‰çš„bitéƒ½æœƒè¢«ç™¼é€å‡ºå»ï¼Œç„¶å¾Œè®“ä¸»æ©Ÿä¾†åˆ¤æ–·æ˜¯ä¸æ˜¯éœ€è¦ã€‚\ndigital subscriber line (DSL): network line and telephone line to central office DSLAM. cable network: å…±äº«é »å¯¬ï¼Œéœ€è¦åˆ†æ•£å¼çš„å¤šé‡å­˜å–å”å®šï¼Œç”¨ä¾†å”èª¿å‚³è¼¸ï¼Œé¿å…ç¢°æ’ã€‚\nå¤§éƒ¨åˆ†packet switchä½¿ç”¨store-and-forward transmission (å„²å­˜è½‰é€å‚³è¼¸)ï¼Œrouterå¿…é ˆå…ˆæ¥æ”¶åˆ°æ•´å€‹å°åŒ…ï¼Œæ‰é–‹å§‹å°‡ç¬¬ä¸€å€‹ä½å…ƒå‚³è¼¸åˆ°å¤–éƒ¨é€£çµã€‚\nPacket Switching vs Circuit Switching: ç¶²éš›ç¶²è·¯ä½¿ç”¨æ­¤ï¼Œè³‡æºä¸æœƒè¢«ä¿ç•™(queueing delay loss)/è³‡æ–™æœƒè¢«é ç´„ä¿ç•™ queueing delay: packet arrival rate to link (temporarily) exceeds output link capacity.\n",
  "wordCount" : "6474",
  "inLanguage": "en",
  "image":"https://i.imgur.com/Z6BvqSJ.png","datePublished": "2023-06-15T00:00:00Z",
  "dateModified": "2023-06-15T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Jonathan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jonathan-tw.github.io/posts/%E8%AA%B2%E7%A8%8B%E7%AD%86%E8%A8%98ntust-network-communication-protocols/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Jonathan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jonathan-tw.github.io/img/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>



<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jonathan-tw.github.io" accesskey="h" title="Jonathan&#39;s Blog (Alt + H)">
            <img src="https://jonathan-tw.github.io/img/favicon.ico" alt="logo" aria-label="logo"
                 height="35">Jonathan&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jonathan-tw.github.io/" title="ğŸ  Home">
                <span>ğŸ  Home</span>
                </a>
            </li>
            <li>
                <a href="https://jonathan-tw.github.io/posts" title="ğŸ“š Posts">
                <span>ğŸ“š Posts</span>
                </a>
            </li>
            <li>
                <a href="https://jonathan-tw.github.io/tags" title="ğŸ§© Tags">
                <span>ğŸ§© Tags</span>
                </a>
            </li>
            <li>
                <a href="https://jonathan-tw.github.io/archives/" title="ğŸ“… Archive">
                <span>ğŸ“… Archive</span>
                </a>
            </li>
            <li>
                <a href="https://jonathan-tw.github.io/search" title="ğŸ” Search (Alt &#43; /)" accesskey=/>
                <span>ğŸ” Search</span>
                </a>
            </li>
            <li>
                <a href="https://coding-interview.netlify.app/" title="ğŸ‘¨â€ğŸ’» Jonathan&#39;s Coding Interview">
                <span>ğŸ‘¨â€ğŸ’» Jonathan&#39;s Coding Interview</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="https://jonathan-tw.github.io">Home</a>&nbsp;Â»&nbsp;<a href="https://jonathan-tw.github.io/posts/">ğŸ“š Posts</a></div>
            <h1 class="post-title">
                (èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols
            </h1>
            <div class="post-meta">Created:&nbsp;<span title='2023-06-15 00:00:00 +0000 UTC'>2023-06-15</span>&nbsp;|&nbsp;Upated:&nbsp;2023-06-15&nbsp;|&nbsp;Count words:&nbsp;6474&nbsp;|&nbsp;Reading time:&nbsp;13 mins



                &nbsp;|&nbsp;Tags: &nbsp;
                <ul class="post-tags-meta">
                    <a href="https://jonathan-tw.github.io/tags/ntust/">NTUST</a>
                    <a href="https://jonathan-tw.github.io/tags/%E8%AA%B2%E7%A8%8B%E7%AD%86%E8%A8%98/">ã€èª²ç¨‹ç­†è¨˜</a>
                </ul>
                

            
            </span>

</div>
        </header> 
<figure class="entry-cover1"><img loading="lazy" src="https://i.imgur.com/Z6BvqSJ.png" alt="">
        
</figure>
        <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#layered-outline" aria-label="Layered Outline">Layered Outline</a><ul>
                        
                <li>
                    <a href="#tcpip-5-layer" aria-label="TCP/IP 5 Layer">TCP/IP 5 Layer</a></li>
                <li>
                    <a href="#isoosi-7-layer" aria-label="ISO/OSI 7 Layer">ISO/OSI 7 Layer</a></li>
                <li>
                    <a href="#openflow-flow-table-entries" aria-label="OpenFlow: Flow Table Entries">OpenFlow: Flow Table Entries</a></li></ul>
                </li>
                <li>
                    <a href="#application-layer" aria-label="Application Layer">Application Layer</a><ul>
                        
                <li>
                    <a href="#http--hyper-text-transfer-protocol-" aria-label="HTTP ( Hyper Text Transfer Protocol )">HTTP ( Hyper Text Transfer Protocol )</a></li>
                <li>
                    <a href="#electronic-mail" aria-label="Electronic Mail">Electronic Mail</a><ul>
                        
                <li>
                    <a href="#smtp--simple-mail-transfer-protocol-" aria-label="SMTP ( Simple Mail Transfer Protocol )">SMTP ( Simple Mail Transfer Protocol )</a></li></ul>
                </li>
                <li>
                    <a href="#dns--domain-name-system-" aria-label="DNS ( Domain Name System )">DNS ( Domain Name System )</a></li>
                <li>
                    <a href="#video-streaming-and-content-distribution-networks-cdns" aria-label="video streaming and content distribution networks (CDNs)">video streaming and content distribution networks (CDNs)</a></li>
                <li>
                    <a href="#dhcp--dynamic-host-configuration-protocol-" aria-label="DHCP ( Dynamic Host Configuration Protocol ï¼‰">DHCP ( Dynamic Host Configuration Protocol ï¼‰</a></li>
                <li>
                    <a href="#sockets" aria-label="Sockets">Sockets</a></li></ul>
                </li>
                <li>
                    <a href="#transport-layer" aria-label="Transport Layer">Transport Layer</a><ul>
                        
                <li>
                    <a href="#tcp" aria-label="TCP">TCP</a><ul>
                        
                <li>
                    <a href="#tcp-congestion-control" aria-label="TCP congestion control">TCP congestion control</a></li>
                <li>
                    <a href="#tcp-new-reno" aria-label="TCP New Reno">TCP New Reno</a></li>
                <li>
                    <a href="#tcp-sack" aria-label="TCP SACK">TCP SACK</a></li>
                <li>
                    <a href="#tcp-ecn--explicit-congestion-notification-" aria-label="TCP ECN ( Explicit Congestion Notification )">TCP ECN ( Explicit Congestion Notification )</a></li>
                <li>
                    <a href="#tcp--vegas" aria-label="TCP  Vegas">TCP  Vegas</a></li>
                <li>
                    <a href="#randowm-early-detection-red" aria-label="Randowm Early Detection (RED)">Randowm Early Detection (RED)</a></li>
                <li>
                    <a href="#sequence-number" aria-label="Sequence Number">Sequence Number</a></li></ul>
                </li>
                <li>
                    <a href="#udp-best-effort" aria-label="UDP (best effort)">UDP (best effort)</a></li></ul>
                </li>
                <li>
                    <a href="#network-layer" aria-label="Network Layer">Network Layer</a><ul>
                        
                <li>
                    <a href="#router-architecture" aria-label="Router Architecture">Router Architecture</a></li>
                <li>
                    <a href="#ipv4" aria-label="IPv4">IPv4</a><ul>
                        
                <li>
                    <a href="#private--addresses" aria-label="Private  Addresses">Private  Addresses</a></li>
                <li>
                    <a href="#net-idhost-id%e8%88%87mask" aria-label="Net IDã€Host IDèˆ‡Mask">Net IDã€Host IDèˆ‡Mask</a></li>
                <li>
                    <a href="#supernet-cidr%e8%88%87-subnet" aria-label="Supernet (CIDR)èˆ‡ Subnet">Supernet (CIDR)èˆ‡ Subnet</a></li>
                <li>
                    <a href="#delivery-and-routing-of-ip-packets" aria-label="Delivery and Routing of IP Packets">Delivery and Routing of IP Packets</a></li></ul>
                </li>
                <li>
                    <a href="#ipv6" aria-label="IPv6">IPv6</a></li>
                <li>
                    <a href="#ip-packet" aria-label="IP Packet">IP Packet</a></li>
                <li>
                    <a href="#ip-packet%e5%88%87%e5%89%b2%e8%88%87%e9%87%8d%e7%b5%84" aria-label="IP Packetåˆ‡å‰²èˆ‡é‡çµ„">IP Packetåˆ‡å‰²èˆ‡é‡çµ„</a><ul>
                        
                <li>
                    <a href="#mtu--maximum-transmission-unit-" aria-label="MTU ( Maximum Transmission Unit )">MTU ( Maximum Transmission Unit )</a></li></ul>
                </li>
                <li>
                    <a href="#icmp--internet-control-message-protocol-" aria-label="ICMP ( Internet Control Message Protocol )">ICMP ( Internet Control Message Protocol )</a></li>
                <li>
                    <a href="#arp--address-resolution-protocol-" aria-label="ARP ( Address Resolution Protocol )">ARP ( Address Resolution Protocol )</a></li>
                <li>
                    <a href="#routing-protocol" aria-label="Routing Protocol">Routing Protocol</a><ul>
                        
                <li>
                    <a href="#rip--routing-information-protocol-" aria-label="RIP ( Routing Information Protocol )">RIP ( Routing Information Protocol )</a></li>
                <li>
                    <a href="#ospf--open-shortest-path-first-" aria-label="OSPF ( Open Shortest Path First )">OSPF ( Open Shortest Path First )</a></li>
                <li>
                    <a href="#bgp--border-gateway-protocol-" aria-label="BGP ( Border Gateway Protocol )">BGP ( Border Gateway Protocol )</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96" aria-label="å…¶ä»–">å…¶ä»–</a><ul>
                        
                <li>
                    <a href="#hub%e9%9b%86%e7%b7%9a%e5%99%a8" aria-label="HUB(é›†ç·šå™¨)">HUB(é›†ç·šå™¨)</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
            const id = encodeURI(element.getAttribute('id')).toLowerCase();
            if (element === activeElement){
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
            } else {
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
            }
        })
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        
        <div class="post-content"><h2 id="layered-outline">Layered Outline<a hidden class="anchor" aria-hidden="true" href="#layered-outline">#</a></h2>
<p>What&rsquo;s  a protocol?</p>
<p>protocols define format, order of messages sent and received among network entities, and actions taken on message transmission, receipt</p>
<h3 id="tcpip-5-layer">TCP/IP 5 Layer<a hidden class="anchor" aria-hidden="true" href="#tcpip-5-layer">#</a></h3>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Application Layer</td>
<td>HTTPã€DHCPã€RPCã€P2Pã€DNS</td>
</tr>
<tr>
<td>Transport Layer</td>
<td>UDPã€TCP</td>
</tr>
<tr>
<td>Network Layer (IP)</td>
<td>IPã€ICMPã€OSPFã€BGP</td>
</tr>
<tr>
<td>Data-link Layer  (MAC)</td>
<td>MACã€VLANã€STP</td>
</tr>
<tr>
<td>Physical Layer</td>
<td>ç¶²è·¯æŒ‘ç·š</td>
</tr>
</tbody>
</table>
<h3 id="isoosi-7-layer">ISO/OSI 7 Layer<a hidden class="anchor" aria-hidden="true" href="#isoosi-7-layer">#</a></h3>
<img src="https://i.imgur.com/Iuf6KK5.png" style="zoom:70%"/>
<p>ï‚§ Presentation: allow applications to interpret meaning of data.
example: encryption, compression, machine-specific conventions.
ï‚§ Session: synchronization, checkpointing, recovery of data exchange.</p>
<p><strong>åªè¦æ˜¯åœ¨ç¶²çµ¡ä¸Šè·‘çš„åŒ…ï¼Œéƒ½æ˜¯å®Œæ•´çš„ã€‚å¯ä»¥æœ‰ä¸‹å±¤æ²’ä¸Šå±¤ï¼Œçµ•å°ä¸å¯èƒ½æœ‰ä¸Šå±¤æ²’ä¸‹å±¤ã€‚</strong>
IP address: ä¸€å€‹ç¶²å¡åœ¨ç¶²çµ¡ä¸–ç•Œçš„é€šè¨Šåœ°å€ï¼Œç›¸ç•¶æ–¼æˆ‘å€‘ç¾å¯¦ä¸–ç•Œçš„é–€ç‰Œè™Ÿç¢¼ã€‚
MAC address: èº«ä»½è­‰ï¼Œå€åŸŸç¶²å…§é€šä¿¡ç”¨ã€‚</p>
<ol>
<li>Macåœ¨data link layerä½¿ç”¨ï¼ŒIPåœ¨network layerä½¿ç”¨ï¼ŒIPä½ç½®åœ¨å€åŸŸç¶²å…§å¯èƒ½ç™¼ç”Ÿæ”¹è®Šï¼Œå”¯ä¸€æ€§çš„MACéœ€è¦ã€‚</li>
<li>macä½ç½®å…¨çƒå”¯ä¸€ï¼Œå›ºåŒ–åœ¨ç¶²å¡è£¡ã€‚OSè­˜åˆ¥å‡ºä¾†çš„macä½ç½®å¯ä»¥æ›´æ”¹ï¼Œä»–æ˜¯ä¸€å€‹stringï¼Œæˆ‘å€‘å¸¸èªªä¿®æ”¹çš„macæŒ‡çš„æ˜¯ä¿®æ”¹é›»è…¦è¨»å†Šè¡¨ä¸­çš„ç´€éŒ„ã€‚</li>
</ol>
<img src="https://i.imgur.com/cKtLr3c.png" style="zoom:50%"/>
<h3 id="openflow-flow-table-entries">OpenFlow: Flow Table Entries<a hidden class="anchor" aria-hidden="true" href="#openflow-flow-table-entries">#</a></h3>
<p>operates between controller, switch.</p>
<img src="https://i.imgur.com/umFrnnf.png" style="zoom:50%"/>
<h2 id="application-layer">Application Layer<a hidden class="anchor" aria-hidden="true" href="#application-layer">#</a></h2>
<h3 id="http--hyper-text-transfer-protocol-">HTTP ( Hyper Text Transfer Protocol )<a hidden class="anchor" aria-hidden="true" href="#http--hyper-text-transfer-protocol-">#</a></h3>
<p>Uses TCP; stateless.
non-persistent HTTP â¡ at most one object sent over TCP connection,connection then closed.
persistent HTTP â¡ multiple objects can be sent over single TCP connection between client, server.
HTTP response time = 2RTT  (å»ºç«‹TCPé€£ç·šã€è«‹æ±‚å’Œæ¥æ”¶ç‰©ä»¶)+ file transmission time</p>
<p>serverå¸Œæœ›èƒ½è­˜åˆ¥ä½¿ç”¨è€…èº«åˆ†æä¾›ä¸åŒçš„å…§å®¹ï¼Œå› HTTPæ˜¯statelessï¼Œæ‰€ä»¥HTTPä½¿ç”¨<strong>cookies</strong>ã€‚</p>
<img src="https://i.imgur.com/miWl6v4.png" style="zoom:50%"/>
<blockquote>
<p>çµåˆcookieå’Œuseræ‰€æä¾›çš„å¸³è™Ÿè³‡è¨Šï¼Œwebsiteèƒ½ç²å¾—å¤§é‡ä½¿ç”¨è€…çš„ç›¸é—œè³‡æ–™ï¼Œæœ‰å¯èƒ½è²©è³£é€™äº›è³‡è¨Š(å®‰å…¨ç–‘æ…®)</p>
</blockquote>
<p>Web cache = proxy server ( server for original requesting clientã€client to origin server )</p>
<ol>
<li>proxy servers reduce response time for client request.</li>
<li>proxy servers reduce traffic on an institution&rsquo;s access link.</li>
</ol>
<h3 id="electronic-mail">Electronic Mail<a hidden class="anchor" aria-hidden="true" href="#electronic-mail">#</a></h3>
<h4 id="smtp--simple-mail-transfer-protocol-">SMTP ( Simple Mail Transfer Protocol )<a hidden class="anchor" aria-hidden="true" href="#smtp--simple-mail-transfer-protocol-">#</a></h4>
<p>between mail servers to send email messages.</p>
<ol>
<li>TCP /port 25</li>
<li>use persistent connections.</li>
</ol>
<img src="https://i.imgur.com/agvpnGv.png" style="zoom:50%"/>
<h3 id="dns--domain-name-system-">DNS ( Domain Name System )<a hidden class="anchor" aria-hidden="true" href="#dns--domain-name-system-">#</a></h3>
<p>A <em>distributed</em>, hierarchical database. Translate host name to IP address. ( UDP port/53 )</p>
<blockquote>
<p>root DNS serverã€ TLD DNS server ( .com/.org/.edu/.gov )ã€ authoritative DNS server /au.thor.i.ta.tive/
Local DNS name server: each ISP (residential ISP, company, university) has one = DNS caching</p>
</blockquote>
<img src="https://i.imgur.com/Kb8VW2I.png" style="zoom:50%"/>
<h3 id="video-streaming-and-content-distribution-networks-cdns">video streaming and content distribution networks (CDNs)<a hidden class="anchor" aria-hidden="true" href="#video-streaming-and-content-distribution-networks-cdns">#</a></h3>
<img src="https://i.imgur.com/c7Lhg8t.png" style="zoom:50%"/>
<img src="https://i.imgur.com/OlnmqkL.png" style="zoom:50%"/>
<h3 id="dhcp--dynamic-host-configuration-protocol-">DHCP ( Dynamic Host Configuration Protocol ï¼‰<a hidden class="anchor" aria-hidden="true" href="#dhcp--dynamic-host-configuration-protocol-">#</a></h3>
<p>ä¸»è¦æ˜¯ç”¨ï¤­æä¾›åœ¨TCP/ IPç¶²ï¤·ä¸Šçš„ä¸»æ©Ÿå¯ä»¥è‡ªå‹•çš„åˆ†é…åˆ°IPåŠæ‰€éœ€è¦çš„ç›¸é—œè¨­å®šã€‚
DHCPå¯åˆ†æˆï¥¸å€‹éƒ¨åˆ†ï¤­çœ‹ï¼Œä¸€å€‹æ˜¯DHCPä¼ºæœå™¨ç«¯ï¼Œå¦ä¸€å€‹æ˜¯DHCPç”¨æˆ¶ç«¯ã€‚</p>
<p>DHCP serveræœ‰ä¸€å€‹é›†ä¸­å¼çš„ç®¡ï§¤ç¨‹å¼ï¼Œä¸»è¦è² è²¬è¨­å®šç¶²ï¤·å„ä¸»æ©Ÿä¸Šæ‰€éœ€è¦çš„IPè³‡è¨Šï¼Œä¸¦
æä¾›çµ¦Clientï¥ªå–ä½¿ç”¨ã€‚DHCPç”¨æˆ¶ç«¯æ˜¯è² è²¬å‘DHCPä¼ºæœå™¨ï¥ªå–æ‰€éœ€è¦ä¹‹ç›¸é—œIPè³‡è¨Šï¼Œä¸¦å°‡è³‡ï¦¾è¨»å†Šåˆ°è©²ç³»çµ±ä¸­ã€‚</p>
<img src="https://i.imgur.com/y3WGmHf.png" style="zoom:50%" />
<img src="https://i.imgur.com/ieOEiwi.png" style="zoom:70%"/>
<h3 id="sockets">Sockets<a hidden class="anchor" aria-hidden="true" href="#sockets">#</a></h3>
<img src="https://i.imgur.com/uXzQjOx.png" style="zoom:50%"/>
<img src="https://i.imgur.com/0YpA6RX.png" style="zoom:50%"/>
<h2 id="transport-layer">Transport Layer<a hidden class="anchor" aria-hidden="true" href="#transport-layer">#</a></h2>
<p>what transport service does an app need?</p>
<ol>
<li>data integrity</li>
<li>timing</li>
<li>throughput</li>
<li>security</li>
</ol>
<h3 id="tcp">TCP<a hidden class="anchor" aria-hidden="true" href="#tcp">#</a></h3>
<p>DEF â¡ reliable transportã€flow controlã€connection-oriented
doesn&rsquo;t provide â¡ timing, minimum throughput guarantee, security</p>
<blockquote>
<p>TCPçš„å¢å¼·ç‰¹æ€§ Fast Retransmit &amp; Recovery ï¼ˆFRRï¼‰ï¼Œç•¶receiverç™¼ç¾ä¸ŸåŒ…æ™‚ï¼Œç™¼é€é‡è¤‡çš„ACKçµ¦å°æ–¹ï¼Œç•¶senderæ”¶åˆ°3å€‹é‡è¤‡çš„ackæ™‚ï¼Œå°±ç¢ºäººæ­¤packetç‚ºlossï¼Œé¦¬ä¸Šé€²è¡Œé‡å‚³(ä¸éœ€ç­‰å¾…time out)</p>
</blockquote>
<ol>
<li>ç‚ºï¦ºåœ¨ï¥§å¯é çš„ç¶²ï¤·ä»‹é¢ä¸Šå»ºï§·å¯é çš„å‚³é€è³‡ï¦¾æœå‹™ï¼ŒTCPå¿…é ˆè§£æ±ºå¯é æ€§ï¼Œflow controlçš„å•é¡Œï¼Œè€Œä¸”å¿…é ˆèƒ½ç‚ºä¸Šå±¤çš„æ‡‰ç”¨ç¨‹å¼ï¤­æä¾›å¤šå€‹åŸ å£ï¼Œç”¨ï¤­åŒæ™‚ç‚ºå¤šå€‹æ‡‰ç”¨ç¨‹å¼æä¾›è³‡ï¦¾ï¼ŒåŒæ™‚ï¼ŒTCPå¿…é ˆè§£æ±ºï¦šæ¥çš„å•é¡Œï¼Œé€™æ¨£å­çš„è©±ï¼ŒTCPæ‰æ˜¯å€‹å¯é çš„é€šè¨Šå”å®šï¼Œè€Œæœ€å¾Œä¹Ÿè¦å…‹æœé€šè¨Šå®‰å…¨çš„å•é¡Œã€‚</li>
<li>TCPï¦šæ¥æ˜¯å¯é çš„ï¼Œè€Œä¸”ä¿è¨¼ï¦ºå‚³é€å€æ®µçš„é †åºï¼Œä¿è¨¼é †åºçš„èƒ½ï¦Šæ˜¯ç”¨ä¸€å€‹åºè™Ÿï¤­é”æˆçš„ï¼Œå€æ®µå…§ä¹ŸåŒ…æ‹¬ä¸€å€‹åºï¦œè™Ÿï¼Œè¡¨ç¤ºæ¥æ”¶æ–¹æº–å‚™å¥½é€™å€‹åºè™Ÿçš„å€æ®µï¼Œåœ¨TCPå”å®šå‚³é€ä¸€å€‹å€æ®µæ™‚ï¼Œå®ƒæœƒåŒæ™‚æŠŠé€™å€‹å€æ®µæ”¾å…¥é‡æ–°ç™¼é€çš„åºï¦œä¸­ï¼ŒåŒæ™‚å•Ÿå‹•è¨ˆï¥©å™¨ï¼Œå¦‚æœæ”¶åˆ°ï¦ºç¢ºèªè¨Šæ¯ï¼Œå°±æœƒæŠŠé‡é€çš„å€æ®µåºï¦œåˆªé™¤ï¼Œå¦‚æœè¶…éè¨ˆï¥©æ™‚é–“æ™‚ï¼Œå°±æœƒå°‡é€™å€‹å€æ®µé‡é€ã€‚</li>
</ol>
<p>Sliding Window: data flow controlçš„æŠ€å·§ï¼Œå®ƒè¦æ±‚sender hoståœ¨å‚³é€ä¸€å®šé‡çš„dataä»¥å¾Œï¼Œå¿…é ˆæ¥æ”¶å°æ”¾çš„ç¢ºèªã€‚
Window Sizeæ˜¯ç”±destinationæ±ºå®šï¼Œè€Œä¸”æœƒä¾ç¶²ï¤·ï§Šï¥¾èª¿æ•´ä¸¦éä¸€æˆï¥§è®Š(maybe congestion)ï¼ŒThe destination can send an acknowledgment at any timeã€‚</p>
<p>TCP socket identified by 4-tuple:</p>
<p>â€¢ source IP address
â€¢ source port number
â€¢ dest IP address
â€¢ dest port number</p>
<blockquote>
<p>Demux (ç”±ä¸‹åˆ°ä¸Šå‚³åˆ°socket): receiver uses all four values to direct segment to appropriate socket.
each socket identified by its own 4-tuple. (ä¸åŒçš„source ip address or port numberï¼Œå°±æœƒè½‰äº¤çµ¦å…©ä»½ä¸åŒçš„socket)</p>
</blockquote>
<img src="https://i.imgur.com/N8Sfxn3.jpg" style="zoom:30%"/>
<img src="https://i.imgur.com/GKKvogB.png" style="zoom:50%"/>
<img src="https://i.imgur.com/kwWG2nk.png" style="zoom:50%"/>
<h4 id="tcp-congestion-control">TCP congestion control<a hidden class="anchor" aria-hidden="true" href="#tcp-congestion-control">#</a></h4>
<p>flow control â¡ receiver æ§åˆ¶senderåˆ¥é€å¤ªå¤š (Receive Window)</p>
<p>cwnd (Congestion Window, bytes) â¡ é™åˆ¶TCP senderè³‡æ–™é€å…¥ç¶²è·¯çš„é€Ÿç‡ï¼Œç‚ºäº†é¿å…congestionï¼Œå€¼æ‡‰è©²éƒ½&lt; cwndã€‚</p>
<blockquote>
<p>rate = cwnd (é‡) / RTT bytes/sec
ssthresh = cwnd / 2</p>
</blockquote>
<p>MSS: ( Maximum Segment Size ) â¡ MSSæ˜¯TCPæ•¸æ“šåŒ…æ¬¡èƒ½å¤ å‚³è¼¸çš„æœ€å¤§æ•¸æ“šåˆ†æ®µã€‚å»ºç«‹é€£ç·šä¹‹å‰é›™æ–¹è¬›å¥½ï¼Œå› TCPç‚ºé›™å‘é€£ç·šï¼Œæ‰€ä»¥å…©é‚Šå‚³éä¹‹æœ€å¤§å€¼å¯ä»¥ä¸ä¸€æ¨£</p>
<blockquote>
<p>çˆ²äº†é”åˆ°æœ€ä½³çš„å‚³è¼¸æ•ˆèƒ½ï¼ŒTCPå”è­°åœ¨å»ºç«‹é€£æ¥çš„æ™‚å€™é€šå¸¸è¦å”å•†é›™æ–¹çš„MSSå€¼ï¼Œé€™å€‹å€¼TCPå”è­°åœ¨å¯¦ç¾çš„æ™‚å€™å¾€å¾€ç”¨MTUå€¼ä»£æ›¿ï¼ˆéœ€è¦æ¸›å»IPæ•¸æ“šåŒ…åŒ…é ­çš„å¤§å°20Byteså’ŒTCPæ•¸æ“šæ®µçš„åŒ…é ­20Bytesï¼‰æ‰€ä»¥ä¸€èˆ¬MSSå€¼1460ï¼Œé€šè¨Šé›™æ–¹æœƒæ ¹æ“šé›™æ–¹æä¾›çš„MSSå€¼å¾—æœ€å°å€¼ç¡®å®šçˆ²é€™æ¬¡é€£æ¥çš„æœ€å¤§MSSå€¼ã€‚</p>
</blockquote>
<hr>
<p>Slow Start â¡ initial.cwnd = 1MSSï¼Œæ¯ç•¶receiverå¾—åˆ°ä¸€æ¬¡ç¢ºèªå¾Œå°±å¢åŠ  1 MSS (å„å°‡cwnd+1ï¼Œdouble cwnd)ï¼Œ æ­¤ä¸€éç¨‹é€ æˆæ¯å›RTTä¸­å‚³é€é€Ÿç‡å€å¢ï¼Œå› æ­¤TCPçš„å‚³é€é€Ÿç‡å¾ä½é€Ÿé–‹å§‹ï¼Œæ¥ä¸‹ä¾†æœƒä»¥æŒ‡æ•¸æ€§åœ°æˆé•·ã€‚</p>
<blockquote>
<p>æŒ‡æ•¸æˆé•· cwnd = cwnd + 1 å‡º2å›2 å‡º4å›4 å‡º8å›8ï¼Œå‚³çš„å–®ä½æ˜¯per ackï¼Œæ¯æ¬¡å›ä¾†å¹¾å€‹ackå°±+1å¹¾æ¬¡ã€‚</p>
</blockquote>
<p>Success Event</p>
<ol>
<li>increase exponentially (new ack)</li>
<li>Slow start to congestion avoidance, cwnd gets to 1/2 of its value before timeout (when cwnd &gt;= ssthresh)</li>
</ol>
<p>Loss Event ( timeout )</p>
<ol>
<li>cut cwnd = 1 MSS.</li>
<li>ssthresh = cwnd / 2</li>
</ol>
<p>Congestion Avoidance â¡ ç·šæ€§æˆé•· cwnd = cwnd+1 (cwnd = cwnd + MSS * (MSS / cwnd) )</p>
<blockquote>
<p>cwndå…¨æ”¶å®Œackï¼Œæ•´å€‹cwndæ‰+1ã€‚</p>
</blockquote>
<p>Fast Recovery â¡ senderé‡è¤‡æ”¶åˆ°3æ¬¡ç›¸åŒackæ™‚ï¼Œå¯èƒ½æ˜¯packet lossäº†ï¼Œ</p>
<img src="https://i.imgur.com/BJzR8Ze.png" style="zoom:80%"/>
<img src="https://i.imgur.com/tLyhoxp.png" style="zoom:80%"/>
<blockquote>
<p>ç•¶æ”¶åˆ°ä¸‰å€‹é‡è¤‡çš„ACKRenoå°±æœƒèªçˆ²ä¸¢åŒ…äº†ï¼Œå¹¶èªå®šç¶²çµ¡ä¸­ç™¼ç”Ÿäº†æ“å¡ã€‚RenoæœƒæŠŠç•¶å‰çš„<code>ssthresh</code>çš„å€¼è¨­ç½®çˆ²ç•¶å‰<code>cwnd</code>çš„ä¸€åŠï¼Œä½†æ˜¯å¹¶ä¸æœƒå›åˆ°<code>slow start</code>éšæ®µï¼Œè€Œæ˜¯å°†<code>cwnd</code>è¨­ç½®çˆ²ï¼ˆæ›´æ–°å¾Œçš„ï¼‰<code>ssthresh</code>+3MSSï¼Œä¹‹å¾Œ<code>cwnd</code>å‘ˆç·šæ€§å¢é•·ã€‚</p>
</blockquote>
<img src="https://i.imgur.com/kHhSKv1.png" style="zoom:100%"/>
<img src="https://i.imgur.com/J2nTEZo.png" style="zoom:50%"/>
<h4 id="tcp-new-reno">TCP New Reno<a hidden class="anchor" aria-hidden="true" href="#tcp-new-reno">#</a></h4>
<p><strong>NewReno</strong>æ˜¯åŸºæ–¼<strong>Reno</strong>çš„æ”¹é€²ç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯æ”¹é€²äº†Fast Recoveryã€‚</p>
<blockquote>
<p>NewRenoéœ€è¦æ”¶åˆ°è©²çª—å£å†…æ‰€æœ‰æ•¸æ“šåŒ…çš„ç¡®èªå¾Œæ‰æœƒé€€å‡ºå¿«é€Ÿæ¢è¤‡ç‹€æ€ï¼Œå¾è€Œæ›´ä¸€æ­¥æé«˜ååé‡ã€‚</p>
</blockquote>
<h4 id="tcp-sack">TCP SACK<a hidden class="anchor" aria-hidden="true" href="#tcp-sack">#</a></h4>
<p>TCP SACKåœ¨TCP RenoåŸºç¤ä¸Šå¢åŠ äº†ï¼š</p>
<ol>
<li>é¸æ“‡ç¡®èªï¼ˆSelective Acknowledgementsï¼ŒSACKï¼‰</li>
<li>é¸æ“‡é‡å‚³ï¼ˆSelective Retransmissionï¼‰</li>
</ol>
<blockquote>
<p>SACKå°±æ˜¯æ”¹è®ŠTCPçš„ç¢ºèªæ©Ÿåˆ¶ï¼Œæœ€åˆçš„TCPéš»ç¢ºèªç•¶å‰å·²é€£çºŒæ”¶åˆ°çš„æ•¸æ“šï¼ŒSACKå‰‡æŠŠäº‚åºç­‰ä¿¡æ¯æœƒå…¨éƒ¨å‘Šè¨´å°æ–¹ï¼Œå¾è€Œæ¸›å°‘æ•¸æ“šç™¼é€æ–¹é‡å‚³çš„ç›²ç›®æ€§ã€‚æ¯”å¦‚èªªåºè™Ÿ1ï¼Œ2ï¼Œ3ï¼Œ5ï¼Œ7çš„æ•¸æ“šæ”¶åˆ°äº†ï¼Œé‚£éº¼æ™®é€šçš„ACKéš»æœƒç¢ºèªåºåˆ—è™Ÿ4ï¼Œè€ŒSACKæœƒæŠŠç•¶å‰çš„5ï¼Œ7å·²ç¶“æ”¶åˆ°çš„ä¿¡æ¯åœ¨SACKé¸é …è£é¢å‘ŠçŸ¥å°ç«¯ï¼Œå¾è€Œæé«˜æ€§èƒ½ï¼Œç•¶ä½¿ç”¨SACKçš„æ™‚å€™ï¼ŒNewRenoç®—æ³•å¯ä»¥ä¸ä½¿ç”¨ï¼Œå› çˆ²SACKæœ¬èº«æ”œå¸¶çš„ä¿¡æ¯å°±å¯ä»¥ä½¿å¾—ç™¼é€æ–¹æœ‰è¶³å¤ çš„ä¿¡æ¯ä¾†çŸ¥é“éœ€è¦é‡å‚³å“ªäº›åŒ…ï¼Œè€Œä¸éœ€è¦é‡å‚³å“ªäº›åŒ…ã€‚</p>
</blockquote>
<h4 id="tcp-ecn--explicit-congestion-notification-">TCP ECN ( Explicit Congestion Notification )<a hidden class="anchor" aria-hidden="true" href="#tcp-ecn--explicit-congestion-notification-">#</a></h4>
<p>ECN = 11  = routerå·²é‡åˆ°æ“å¡ç‹€æ³
ç•¶routerå°‡ IP paecketçš„ ECN æ¬„ä½è¨­å®šç‚º 11 æ™‚ï¼Œreceiverå°±æœƒæ¥åˆ°è·¯å¾‘ä¸­congestionçš„é€šçŸ¥ã€‚ECN ä½¿ç”¨ TCP headerå‘å‚³é€ç«¯æŒ‡å‡ºç¶²è·¯æ­£é‡åˆ°æ“å¡ç‹€æ³ï¼ŒåŒæ™‚å‘æ¥æ”¶ç«¯æŒ‡å‡ºå‚³é€ç«¯å·²ç¶“å¾æ¥æ”¶ç«¯æ¥åˆ°æ“å¡æŒ‡æ¨™ï¼Œä¸¦ä¸”é™ä½å‚³è¼¸é€Ÿç‡ã€‚</p>
<blockquote>
<p>receiver sets ECE bit on receiver-to-sender ACK segment to notify sender of congestion</p>
</blockquote>
<img src="https://i.imgur.com/On4PaRd.png"  style="zoom:70%" />
<h4 id="tcp--vegas">TCP  Vegas<a hidden class="anchor" aria-hidden="true" href="#tcp--vegas">#</a></h4>
<p>Vegaså°‡RTTçš„å¢åŠ ä½œç‚ºcongestion networkçš„ä¿¡è™Ÿï¼ŒRTTå¢åŠ (cwndæ¸›å°)ã€RTTæ¸›å°(cwndå¢åŠ )ã€‚
Vegas é€šéæ¯”è¼ƒå¯¦éš›throughputå’Œexpect throughputä¾†èª¿ç¯€cwndçš„å¤§å°ã€‚</p>
<blockquote>
<p>æœŸæœ›ååé‡ï¼šExpected = cwnd / BaseRTT (RTT lowest)ã€‚
å¯¦éš›ååé‡ï¼šActual = cwnd / RTTã€‚
â€“ Diff  =  ExpectedRate â€“ ActualRate.
â€“ if Diff &lt; a . increase CongestionWindow linearly.
â€“ else if Diff &gt; b. decrease CongestionWindow linearly.
â€“ Else. leave CongestionWindow unchanged.</p>
</blockquote>
<p>ç¶²çµ¡ä¸­ Vegas èˆ‡å…¶å®ƒç®—æ³•å…±å­˜çš„æƒ…æ³ä¸‹ï¼ŒåŸºæ–¼ä¸ŸåŒ…çš„æ“å¡æ§åˆ¶ç®—æ³•æœƒå˜—è©¦å¡«æ»¿ç¶²çµ¡ä¸­çš„ç·©æ²–å€ï¼Œå°ç·» Vegas è¨ˆç®—çš„ RTT å¢å¤§ï¼Œé€²è€Œé™ä½æ“å¡çª—å£ï¼Œä½¿å¾—å‚³è¼¸é€Ÿåº¦è¶Šä¾†è¶Šæ…¢ï¼Œå› æ­¤ Vegas æœªèƒ½åœ¨ Internet ä¸Šæ™®éæ¡ç”¨ã€‚</p>
<blockquote>
<p>AIMD: TCP senderæ”¶åˆ°ACKï¼ŒæˆåŠŸcwnd + 1ï¼Œå¤±æ•—cwnd = cwnd / 2 (åŠ æ€§å¢ï¼Œä¹˜æ€§æ¸›)
Linear decrease in Vegas does not violate AIMD since it Happens before packets loss.</p>
</blockquote>
<blockquote>
<p>tcp vegas / reno: Fast Retransmit  â¡ Fast Recovery</p>
</blockquote>
<h4 id="randowm-early-detection-red">Randowm Early Detection (RED)<a hidden class="anchor" aria-hidden="true" href="#randowm-early-detection-red">#</a></h4>
<p>Routeræ‰€æ¡è¨±çš„ä¸€ç¨®ç­–ç•¥ï¼Œé€équeueå¹³å‡é•·åº¦ä¾†detect congestion (AvgLen)ï¼Œè¨ˆç®—ä¸¢æ£„çš„æ¦‚ç‡ä¾†discard packet.</p>
<img src="https://i.imgur.com/WVJQTkP.png" style="zoom:70%"/>
<img src="https://i.imgur.com/Ha1ZXXs.png" style="zoom:60%"/>
<img src="https://i.imgur.com/oocRWbk.png" style="zoom:80%"/>
<blockquote>
<p>RED is good at keeping avg. queue size steady.
Thresholds are hard to determine.</p>
</blockquote>
<h4 id="sequence-number">Sequence Number<a hidden class="anchor" aria-hidden="true" href="#sequence-number">#</a></h4>
<p>TCPä»¥å‘å‰ï¥«ç…§ç¢ºèªï¤­æä¾›å€æ®µæ’åºä½œæ¥­ï¼Œæ¯å€‹è³‡ï¦¾åœ¨å‚³è¼¸å‰ï¨¦æœƒå…ˆåŠ ä»¥ç·¨è™Ÿï¼Œåˆ°ç›®çš„åœ°å·¥ä½œç«™æ™‚ï¼ŒTCPæœƒå°‡é€™äº›å€æ®µé‡æ–°çµ„æˆå®Œæ•´çš„è¨Šæ¯ã€‚ï¥´è³‡ï¦¾ä¸­å°‘ï¦ºæŸå€‹é †åºè™Ÿç¢¼ï¼Œå°±æœƒé‡å‚³è©²å€æ®µã€‚å€æ®µå‚³å‡ºå¾Œï¼Œï¥´åœ¨ä¸€æ®µç‰¹å®šæ™‚é–“å…§æ²’æœ‰æ”¶åˆ°ç¢ºèªï¼Œä¹Ÿæœƒè¦æ±‚é‡å‚³ã€‚</p>
<h3 id="udp-best-effort">UDP (best effort)<a hidden class="anchor" aria-hidden="true" href="#udp-best-effort">#</a></h3>
<p>DEF â¡ unreliable data transfer
doesn&rsquo;t provide â¡ reliabilityã€flow controlã€congestion controlã€timingã€
throughput guaranteeã€securityã€connection setup(handshaking)</p>
<h2 id="network-layer">Network Layer<a hidden class="anchor" aria-hidden="true" href="#network-layer">#</a></h2>
<p>Router examines header fields in all IP datagrams passing through it.
Two key functions:</p>
<ol>
<li>forwarding ( data plane ): move packets from router&rsquo;s input to appropriate router output. (æ€éº¼è½‰é€)</li>
<li>routing ( control plane ): determine route taken by packets from source to destination. (è·¯æ€éº¼èµ°)</li>
</ol>
<img src="https://i.imgur.com/TUdvyG3.png" style="zoom:50%"/>
<img src="https://i.imgur.com/0EVHx6Y.png" style="zoom:50%"/>
<h3 id="router-architecture">Router Architecture<a hidden class="anchor" aria-hidden="true" href="#router-architecture">#</a></h3>
<img src="https://i.imgur.com/ZmutSME.png" style="zoom:50%"/>
<img src="https://i.imgur.com/9VyyBG5.png" style="zoom:50%"/>
<img src="https://i.imgur.com/pAhecWV.png" style="zoom:50%"/>
<img src="https://i.imgur.com/e8RjlmX.png" style="zoom:50%"/>
<p>Longest prefix matching: when looking for forwarding table entry for given destination address, use longest address prefix that matches destination address.</p>
<p>Switching fabrics: transfer packet from input buffer to appropriate output buffer.</p>
<blockquote>
<p><strong>éšŠé ­é˜»å¡</strong>ï¼ˆ<strong>Head-of-line blocking</strong>æˆ–ç¸®å¯«ç‚º<strong>HOL blocking</strong>ï¼‰: å®ƒçš„åŸå› æ˜¯ä¸€åˆ—çš„ç¬¬ä¸€å€‹æ•¸æ“šåŒ…ï¼ˆéšŠé ­ï¼‰å—é˜»è€Œå°ç·»æ•´åˆ—æ•¸æ“šåŒ…å—é˜»ã€‚ä¾‹å¦‚å®ƒæœ‰å¯èƒ½åœ¨ç·©å­˜å¼è¼¸å…¥çš„äº¤æ›æ©Ÿä¸­å‡ºç¾ï¼Œæœ‰å¯èƒ½å› ç‚ºå‚³è¼¸é †åºéŒ¯äº‚è€Œå‡ºç¾ï¼Œäº¦æœ‰å¯èƒ½åœ¨HTTPæµæ°´ç·šä¸­æœ‰å¤šå€‹è«‹æ±‚çš„æƒ…æ³ä¸‹å‡ºç¾ã€‚</p>
</blockquote>
<h3 id="ipv4">IPv4<a hidden class="anchor" aria-hidden="true" href="#ipv4">#</a></h3>
<p>DEF â¡ 10.100.122.2è¢«é»åˆ†å‰²ç‚º4å€‹éƒ¨åˆ†(Byte)ï¼Œæ¯å€‹Byte = 8å€‹bitï¼Œæ‰€ä»¥ipv4ç‚º32 bit addressã€‚
ç”± 0é–‹é ­ åˆ° 127çµå°¾çš„IP æ˜¯ A Class
ç”± 128é–‹é ­ åˆ° 191çµå°¾çš„IPæ˜¯ B Class
ç”± 192é–‹é ­ åˆ° 223çµå°¾çš„å‰‡ç‚º C Class</p>
<img src="https://i.imgur.com/jkG1FsF.png" style="zoom:50%"/>
<h4 id="private--addresses">Private  Addresses<a hidden class="anchor" aria-hidden="true" href="#private--addresses">#</a></h4>
<img src="https://i.imgur.com/GLVNUS1.png" style="zoom:40%"/>
<h4 id="net-idhost-idèˆ‡mask">Net IDã€Host IDèˆ‡Mask<a hidden class="anchor" aria-hidden="true" href="#net-idhost-idèˆ‡mask">#</a></h4>
<p>DEF â¡ å®šç¾©èˆ‡åˆ‡å‰²ç¶²è·¯ç”¨é€”ï¼Œä¸åŒé¡å‹çš„IPæœƒå°æ‡‰åˆ°æœ‰è‘—ä¸åŒçš„Net_IDã€‚
A Classçš„IP / default mask : å‰é¢1 byteæ•¸å­— = Net IDï¼Œå…¶é¤˜ä¸‰çµ„ = Host ID  / 255.0.0.0
B Classçš„IP / default mask: å‰é¢2 byteæ•¸å­— = Net IDï¼Œå¦å…©çµ„ = Host ID / 255.255.0.0
C Classçš„IP / default mask: å‰é¢3 byteæ•¸å­— = Net IDï¼Œå‰©ä¸‹çš„ä¸€çµ„ = Host / 255.255.255.0</p>
<img src="https://i.imgur.com/qdPHFlF.png" style="zoom:50%"/>
<p>Q: 132.21.0.0, find the class, the block, and the range of the addresses?
A: The class is B. <strong>The block has a Net_ID of 132.21. The addresses range from 132.21.0.0 to 132.21.255.255.</strong></p>
<h4 id="supernet-cidrèˆ‡-subnet">Supernet (CIDR)èˆ‡ Subnet<a hidden class="anchor" aria-hidden="true" href="#supernet-cidrèˆ‡-subnet">#</a></h4>
<table>
<thead>
<tr>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Supernet â¡ åˆ©ç”¨ Subnet Mask é‡æ–°å®šç¾©<strong>è¼ƒçŸ­</strong>çš„Net IDï¼Œå€Ÿç”¨Net IDå¾Œé¢å¹¾å€‹bitã€‚</td>
</tr>
<tr>
<td>Subnet â¡ åˆ©ç”¨ Subnet Mask é‡æ–°å®šç¾©<strong>è¼ƒé•·</strong>çš„Net IDï¼Œå€Ÿç”¨Host IDå‰é¢å¹¾å€‹bitï¼Œå¾Œé¢ç•¶ä½œå­ç¶²è·¯çš„host addressã€‚</td>
</tr>
</tbody>
</table>
<p>**Host_Idä¹‹maskåˆ‡æ³•: çœ‹è¦å¹¾å€‹sub-net(åˆ‡å¹¾å€‹1å‡ºå»)ï¼Œå‰©ä¸‹0ç‚ºè©²sub-netä¸‹å¯ä½¿ç”¨çš„ip addresså€‹æ•¸ã€‚ **å³ç§»
Net_Idä¹‹maskåˆ‡æ³•: çœ‹è¦å¹¾å€‹class(åˆ‡å¹¾å€‹0å‡ºå») å·¦ç§»
205.16.37.24/<strong>29</strong> : 8 addresses in the block.  mask address: 255.255.255.X</p>
<p>destination AND mask  = supe	rnet/subnet address.</p>
<p>ä»¥network blockè·Ÿnetwork blockä¹‹é–“ç‚ºç‚ºå–®ä½é€²è¡Œåˆ†å‰²ã€‚</p>
<img src="https://i.imgur.com/kWHx1tf.png" style="zoom:50%"/> 
<p>Q: 201.70.64.0, need 6 subnets. Design the subnets
A:  8 -3 = 5(host_id_0s) subnetså…±8å€‹.
The number of address in each subnet is 32 = ä»£è¡¨1å€‹subnetä¸­(ç¸½å…±8å€‹)ï¼Œå¯å®¹ç´32å€‹ä¸åŒçš„host ip address</p>
<p>Q: We need to make a supernetwork out of 16 class C blocks. What is the supernet mask?
A: 11111111 11111111 11110000 00000000  ( net_idå·¦ç§»4 bit )ã€‚</p>
<h4 id="delivery-and-routing-of-ip-packets">Delivery and Routing of IP Packets<a hidden class="anchor" aria-hidden="true" href="#delivery-and-routing-of-ip-packets">#</a></h4>
<p>Routing IP Packets Policy:
Direct delivery â¡ Host-specific â¡ Network-specific â¡ Default
<strong>indirect delivery</strong>: destination is in another network. If not present, use direct delivery.
<strong>Host-specific</strong>: the entry in the destination field is host-specific address.
If not present, destination field is network-specific address.</p>
<p><strong>next-hopç‚ºè©²hoståˆ°é¡Œç›®æŒ‡å®šrouterçš„å‰ä¸€å€‹router input ip address (åˆ°é¡Œç›®æŒ‡å®šrouter)ã€‚</strong></p>
<img src="https://i.imgur.com/XdTAEcM.png" style="zoom:40%"/>
<img src="https://i.imgur.com/soMMIce.png" style="zoom:40%"/>
<h3 id="ipv6">IPv6<a hidden class="anchor" aria-hidden="true" href="#ipv6">#</a></h3>
<p>other changes from IPv4:</p>
<ol>
<li>checksum: removed entirely to reduce processing time at each hop</li>
<li>options: allowed, but outside of header, indicated by â€œNext Headerâ€ field</li>
<li>ICMPv6: new version of ICMP</li>
</ol>
<h3 id="ip-packet">IP Packet<a hidden class="anchor" aria-hidden="true" href="#ip-packet">#</a></h3>
<p>IP packet = header(æ§åˆ¶è³‡è¨Š) + payload(è³‡æ–™æœ¬èº«)
IP Header(æœ€çŸ­20ã€æœ€å¸¸60): é•·åº¦ç‚º4 Bytesçš„å€æ•¸
IP Payload(æœ€çŸ­8ã€æœ€å¸¸65515)</p>
<img src="https://i.imgur.com/AcBYYcQ.png" style=zoom:50% />
<p>HLEN = Header Length(ä½”4 bits)ï¼Œ<strong>ç´€éŒ„æ­¤IP headerçš„é•·åº¦ï¼ŒHLENçš„è¨ˆç®—æ˜¯ä»¥4 Bytesç‚ºåŸºæœ¬å–®ä½</strong>ã€‚ï¦µå¦‚ï¼šHLENï¤ä½å€¼ç‚º0101ï¼Œå³ä»£è¡¨IP headerçš„é•·ï¨ç‚º5 Ã—4 = 20 Bytesï¼Œæœ€é•·å¯é”15Ã—4 = 60 Bytes</p>
<p>Identification (16 bits) â¡ ï¥´packetåœ¨å‚³è¼¸éç¨‹ä¸­å› ç‚ºMTUçš„é™åˆ¶ï¼Œå°è‡´å‚³è¼¸éç¨‹ä¸­ï¼Œå°‡packetï¨€å‰²æˆå¹¾å€‹Fragmentsé€²è¡Œå‚³é€ï¼Œè€Œå› ç‚ºæ¯å€‹IP packetåˆ°é”ç›®çš„è£ç½®çš„å…ˆå¾Œé †åºå¯èƒ½èˆ‡å‡ºç™¼æ™‚çš„é †åºï¥§åŒï¼Œå› æ­¤æ¥æ”¶ç«¯åœ¨é€²ï¨ˆpacketé‡çµ„æ™‚ï¼Œï¥¥å¿…é ˆä»¥Identificationé€²ï¨ˆåˆ¤æ–·IP packetåŸï¤­çš„é †åºï¼Œä»¥ï¥¥èƒ½å°‡å±¬æ–¼ç›¸åŒè³‡ï¦¾packetçš„fragmentçµ„åˆåœ¨ä¸€èµ·ã€‚</p>
<p>Total Length  (16 bits) â¡ è¨˜ï¤¿æ•´å€‹packetçš„é•·ï¨ï¼ŒåŒ…å«IP headeråŠIPæ‰€å¸¶è³‡ï¦¾å…§å®¹çš„ç¸½å’Œã€‚</p>
<p>Protocol: which protocol to use.</p>
<p>Time To Liveï¼ˆå­˜æ´»æ™‚é–“ï¼‰â¡  ä½”8 Bitsï¼Œè¨˜ï¤¿IPå°åŒ…çš„ã€Œå­˜æ´»æ™‚é–“ã€ï¼Œä»¥é™åˆ¶IPå°åŒ…åœ¨ï¤·ç”±å™¨ä¹‹é–“è½‰é€çš„æ¬¡ï¥©ã€‚ç•¶IPå°åŒ…æ¯ç¶“éä¸€éƒ¨ï¤·ç”±å™¨æ™‚ï¼Œï¤·ç”±å™¨ï¥¥æœƒå°‡Time to Liveï¤ä½å€¼æ¸›1ï¼Œç•¶ï¤·ç”±å™¨æ”¶åˆ°æ­¤ï¤ä½å€¼ç‚º1çš„IPå°åŒ…æ™‚ï¼Œï¥¥ç›´æ¥å°‡ä¹‹ä¸Ÿæ£„ï¼Œï¥§å†è½‰é€ã€‚</p>
<p>Flagï¼ˆå°åŒ…ï¨€å‰²æ——æ¨™ï¼‰â¡ ä½”3 Bitsï¼Œä¸»è¦å°IPå°åŒ…çš„ï¨€å‰²æä¾›æ§åˆ¶è¨Šæ¯ã€‚
ç¬¬1å€‹bit: æœªå®šç¾©ã€‚
ç¬¬2å€‹bit: D æ˜¯å¦å¯ä»¥åˆ‡å‰²
ç¬¬3å€‹bit: M 0 = æœ€å¾Œfragmentationï¼Œ1 = å°šæœ‰å…¶ä»–fragmentationã€‚
If the M bit is 0, it means that there are no more fragments
If the M bit is 1, it means that there is at least one more fragment</p>
<h3 id="ip-packetåˆ‡å‰²èˆ‡é‡çµ„">IP Packetåˆ‡å‰²èˆ‡é‡çµ„<a hidden class="anchor" aria-hidden="true" href="#ip-packetåˆ‡å‰²èˆ‡é‡çµ„">#</a></h3>
<p>routerä¸­å¿…é ˆæœ‰IP packetçš„åˆ‡å‰²èˆ‡é‡çµ„æ©Ÿåˆ¶ï¼Œå³æ˜¯å°‡éé•·çš„packetåŠ ä»¥åˆ‡å‰²ï¼Œä»¥ä¾¿èƒ½åœ¨MTUè¼ƒå°çš„ç¶²è·¯ä¸Šå‚³è¼¸ã€‚ï¨€å‰²å¾Œçš„IPå°åŒ…ï¼Œæœƒç”±ç›®çš„è£ç½®é‡çµ„ï¼Œæ¢ï¥¦æˆåŸï¤­IPå°åŒ…çš„æ¨¡æ¨£ã€‚</p>
<blockquote>
<p>IP æœƒå°‡å°åŒ…åˆ‡å‰²æˆå¤šå€‹è¼ƒå°çš„ (å°æ–¼ MTU) fragmentï¼Œä½¿å…¶èƒ½é€édata-linkå‚³è¼¸ ï¼Œ
ç›®çš„ç«¯æ¥æ”¶å®Œæ‰€æœ‰fragmentå¾Œï¼Œå†å°‡fragmenté€²è¡Œé‡çµ„ã€‚</p>
</blockquote>
<p>IP Fragmentationä¸­IPv4 èˆ‡ IPv6ï¼Œå…¶å°åŒ…å¤§å°ä¸Šé™ï¼Œåˆ†åˆ¥ç‚º 65535 èˆ‡ 65575 Bytesã€‚
é é è¶…å‡ºäº†data-linkçš„frameå¤§å°ã€‚</p>
<h4 id="mtu--maximum-transmission-unit-">MTU ( Maximum Transmission Unit )<a hidden class="anchor" aria-hidden="true" href="#mtu--maximum-transmission-unit-">#</a></h4>
<p>DEF â¡ data-linkä¸­çš„MTUè¦ç¯„äº†frameçš„å¤§å°ä¸Šé™ã€‚
ä¹™å¤ªç¶²è·¯ (Ethernet) ä¸­çš„MTU: 1500 å€‹ä½å…ƒçµ„ã€‚</p>
<h3 id="icmp--internet-control-message-protocol-">ICMP ( Internet Control Message Protocol )<a hidden class="anchor" aria-hidden="true" href="#icmp--internet-control-message-protocol-">#</a></h3>
<p>pingæ˜¯åŸºæ–¼ICMPå®Œæˆçš„ã€‚å®ƒçš„ç›®çš„å°±æ˜¯è®“æˆ‘å€‘èƒ½å¤ æª¢æ¸¬ç¶²ï¤·çš„ï¦šç·šï§ºæ³ï¼Œä¹Ÿèƒ½ç¢ºä¿ï¦šç·šçš„æº–ç¢ºæ€§ï¼Œï¥§éç”±æ–¼åƒ…æ˜¯æ§åˆ¶è¨Šæ¯çš„å‚³éä¸¦ç„¡è©³ç´°çš„æŒ‡å°ï¼Œæ‰€ä»¥ä¸€èˆ¬è€Œè¨€ï¤­æºç«¯ä¸¦ï¥§è™•ï§¤è©²è¨Šæ¯</p>
<img src="https://i.imgur.com/qEHvBZW.png" style="zoom:50%"/>
<h3 id="arp--address-resolution-protocol-">ARP ( Address Resolution Protocol )<a hidden class="anchor" aria-hidden="true" href="#arp--address-resolution-protocol-">#</a></h3>
<p>DEF â¡  å·²çŸ¥IP addressï¼Œæ±‚MAC addressçš„protocolï¼Œåˆ©ç”¨ã€Œå¼ã€çš„æ–¹å¼ã€‚ç™¼é€ä¸€å€‹broadcast packetï¼Œèª°æ˜¯é€™å€‹IPèª°ä¾†å›ç­”ã€‚switchæœƒè¨˜ä½ç™¼ä¾†è«‹æ±‚çš„senderçš„mac addressï¼Œè€Œswitchå­¸ç¿’åˆ°çš„çµæœç¨±ç‚ºforwarding table(æœ‰éæœŸæ™‚é–“)ã€‚</p>
<h3 id="routing-protocol">Routing Protocol<a hidden class="anchor" aria-hidden="true" href="#routing-protocol">#</a></h3>
<h4 id="rip--routing-information-protocol-">RIP ( Routing Information Protocol )<a hidden class="anchor" aria-hidden="true" href="#rip--routing-information-protocol-">#</a></h4>
<ol>
<li>RIP version 2 supports CIDR.</li>
<li>RIP uses the services of UDP on well-known port 520.</li>
</ol>
<h4 id="ospf--open-shortest-path-first-">OSPF ( Open Shortest Path First )<a hidden class="anchor" aria-hidden="true" href="#ospf--open-shortest-path-first-">#</a></h4>
<p>ç”±æ–¼OSPFè·¯ç”±å”å®šçš„ç”¢ç”Ÿï¼Œæ˜¯ç‚ºäº†è§£æ±ºRIPè·¯ç”±å”å®šçš„è¨­å‚™æ•¸é‡çš„å•é¡Œï¼Œæ‰€ä»¥OSPFè·¯ç”±å”å®šå°±æ²’æœ‰è¨­å‚™æ•¸é‡ï¼ˆHop Countï¼‰çš„é™åˆ¶ã€‚æœƒä½¿ç”¨LSAçš„æ–¹å¼èˆ‡å…¶ä»–è·¯ç”±å™¨è¨­å‚™äº¤æ›è³‡è¨Šï¼Œè€Œä¸åªæ˜¯Routing Tableçš„æ›´æ–°è³‡è¨Šè€Œå·²ã€‚æ¯ä¸€å°è·¯ç”±å™¨è¨­å‚™æœƒè‡ªè¡Œè¨ˆç®—å±¬æ–¼è‡ªå·±çš„ã€Œæœ€ä½³ç¶²è·¯è·¯å¾‘ã€ï¼Œè€Œé€™æ¨£çš„è³‡è¨Šåœ¨å„å€‹è·¯ç”±å™¨è¨­å‚™ä¹‹é–“æ˜¯ä¸å®Œå…¨ç›¸åŒçš„ã€‚ä¸€å€‹LSAå°åŒ…ä¸­åŒ…å«äº†ä»‹é¢çš„è³‡è¨Šã€æ‰€ä½¿ç”¨çš„ç¶²è·¯è·¯å¾‘è©•åˆ¤æ¨™æº–ï¼ˆMetricï¼‰ä»¥åŠå…¶ä»–ç›¸é—œçš„è³‡è¨Šã€‚ç•¶ç„¶ï¼Œé—œæ–¼è·¯å¾‘çš„é¸æ“‡ï¼ŒOSPFè·¯ç”±å”å®šæ˜¯æ¡ç”¨æœ€çŸ­è·¯å¾‘å„ªå…ˆæ¼”ç®—æ³•ï¼ˆShortest Path First Algorithmï¼‰ã€‚</p>
<p>æ¯ä¸€å°è·¯ç”±å™¨è¨­å‚™æœƒè‡ªè¡Œè¨ˆç®—å±¬æ–¼è‡ªå·±çš„ã€Œæœ€ä½³ç¶²è·¯è·¯å¾‘ã€ï¼Œè€Œé€™æ¨£çš„è³‡è¨Šåœ¨å„å€‹è·¯ç”±å™¨è¨­å‚™ä¹‹é–“æ˜¯ä¸å®Œå…¨ç›¸åŒçš„ã€‚</p>
<ol>
<li>In OSPF, all routers have the same link state database.</li>
<li>OSPF packets are encapsulated in IP datagrams.</li>
</ol>
<blockquote>
<p>Autonomous System:  ç”±ä¸€å€‹å–®ä½ç®¡ç†ï¼Œä¾‹å¦‚ ISPã€è¶…ç´šå¤§å­¸æ ¡ã€å¤§å…¬å¸ç­‰ç­‰ï¼Œä»€éº¼éƒ½å¤§çš„çµ„ç¹”ã€‚æ¯å€‹ AS è£¡é¢çš„è·¯ç”±è¡¨éƒ½è‡ªå·±ç®¡ï¼Œéš»è¦äº‹å…ˆå®£å‘Šè‡ªå·±æŒæœ‰ä»€éº¼ç¶²æ®µå°±è¡Œäº†ã€‚</p>
</blockquote>
<h4 id="bgp--border-gateway-protocol-">BGP ( Border Gateway Protocol )<a hidden class="anchor" aria-hidden="true" href="#bgp--border-gateway-protocol-">#</a></h4>
<p>routing among the ISPs ï¼ŒBGPæœƒè‡ªå‹•æ±ºå®šå„ç¨®ç‹€æ…‹ä¸‹çš„routerï¼Œæ±ºå®šæ±è¥¿å¾å“ªé‚Šèµ°ï¼Œè©²åœ¨å“ªé‚Šåœ(å¤–éƒ¨ç¶²è·¯ä¸‹)ã€‚
ç¶­è­·router tableä¾†å¯¦ç¾ASä¹‹é–“çš„å¯é”æ€§ã€‚</p>
<p>Simple Network Management Protocol (SNMP ) = ç°¡å–®ç¶²è·¯ç®¡ç†å”å®šä¸€æ–¹é¢ä¸åƒ…å¯ä½¿ç”¨æ–¼ç¶²è·¯è¨­å‚™ä¹‹æ—¥å¸¸ç¶­é‹ä½œæ¥­ï¼Œäº¦å¯æä¾›ç¶²è·¯ç¶­é‹äººå“¡å³æ™‚ç›£æ§è¨­å‚™ç•°å¸¸äº‹ä»¶ç™¼ç”ŸåŠå› æ‡‰è™•ç†ã€‚</p>
<h2 id="å…¶ä»–">å…¶ä»–<a hidden class="anchor" aria-hidden="true" href="#å…¶ä»–">#</a></h2>
<h3 id="hubé›†ç·šå™¨">HUB(é›†ç·šå™¨)<a hidden class="anchor" aria-hidden="true" href="#hubé›†ç·šå™¨">#</a></h3>
<p>DEF â¡ å®Œå…¨åœ¨physical layerå·¥ä½œï¼Œå®ƒæœƒå°‡è‡ªå·±æ”¶åˆ°çš„æ¯ä¸€å€‹byteï¼Œéƒ½è¤‡è£½åˆ°å…¶ä»–portä¸Šå»ã€‚
ç¼º: ä¸ç®¡æŸå€‹ä»‹é¢æ˜¯å¦éœ€è¦ï¼Œæ‰€æœ‰çš„bitéƒ½æœƒè¢«ç™¼é€å‡ºå»ï¼Œç„¶å¾Œè®“ä¸»æ©Ÿä¾†åˆ¤æ–·æ˜¯ä¸æ˜¯éœ€è¦ã€‚</p>
<p>digital subscriber line (DSL): network line and telephone line to central office DSLAM.
cable network: å…±äº«é »å¯¬ï¼Œéœ€è¦åˆ†æ•£å¼çš„å¤šé‡å­˜å–å”å®šï¼Œç”¨ä¾†å”èª¿å‚³è¼¸ï¼Œé¿å…ç¢°æ’ã€‚</p>
<p>å¤§éƒ¨åˆ†packet switchä½¿ç”¨store-and-forward transmission (å„²å­˜è½‰é€å‚³è¼¸)ï¼Œrouterå¿…é ˆå…ˆæ¥æ”¶åˆ°æ•´å€‹å°åŒ…ï¼Œæ‰é–‹å§‹å°‡ç¬¬ä¸€å€‹ä½å…ƒå‚³è¼¸åˆ°å¤–éƒ¨é€£çµã€‚</p>
<p>Packet Switching vs Circuit Switching: ç¶²éš›ç¶²è·¯ä½¿ç”¨æ­¤ï¼Œè³‡æºä¸æœƒè¢«ä¿ç•™(queueing delay loss)/è³‡æ–™æœƒè¢«é ç´„ä¿ç•™
queueing delay: packet arrival rate to link (temporarily) exceeds output link capacity.</p>
<img src="https://i.imgur.com/2hU9fet.png" style="zoom:50%" />


        </div>

        <footer class="post-footer">
            
<nav class="paginav">
  <a class="next" href="https://jonathan-tw.github.io/posts/2019-ieee-improving-performance-of-quic-in-wifi-2018-conext-the-quic-fix-for-optimal-video-streaming/">
    <span class="title">Next Â»</span>
    <br>
    <span>(2019 IEEE) Improving Performance of QUIC in WiFi &amp; (2018 CoNEXT) The QUIC Fix for Optimal Video Streaming</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share (èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols on twitter"
       href="https://twitter.com/intent/tweet/?text=%28%e8%aa%b2%e7%a8%8b%e7%ad%86%e8%a8%98%29%28NTUST%29%20Network%20Communication%20Protocols&amp;url=https%3a%2f%2fjonathan-tw.github.io%2fposts%2f%25E8%25AA%25B2%25E7%25A8%258B%25E7%25AD%2586%25E8%25A8%2598ntust-network-communication-protocols%2f&amp;hashtags=NTUST%2c%e8%aa%b2%e7%a8%8b%e7%ad%86%e8%a8%98">
    <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share (èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols on linkedin"
       href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fjonathan-tw.github.io%2fposts%2f%25E8%25AA%25B2%25E7%25A8%258B%25E7%25AD%2586%25E8%25A8%2598ntust-network-communication-protocols%2f&amp;title=%28%e8%aa%b2%e7%a8%8b%e7%ad%86%e8%a8%98%29%28NTUST%29%20Network%20Communication%20Protocols&amp;summary=%28%e8%aa%b2%e7%a8%8b%e7%ad%86%e8%a8%98%29%28NTUST%29%20Network%20Communication%20Protocols&amp;source=https%3a%2f%2fjonathan-tw.github.io%2fposts%2f%25E8%25AA%25B2%25E7%25A8%258B%25E7%25AD%2586%25E8%25A8%2598ntust-network-communication-protocols%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share (èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols on reddit"
       href="https://reddit.com/submit?url=https%3a%2f%2fjonathan-tw.github.io%2fposts%2f%25E8%25AA%25B2%25E7%25A8%258B%25E7%25AD%2586%25E8%25A8%2598ntust-network-communication-protocols%2f&title=%28%e8%aa%b2%e7%a8%8b%e7%ad%86%e8%a8%98%29%28NTUST%29%20Network%20Communication%20Protocols">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share (èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols on facebook"
       href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjonathan-tw.github.io%2fposts%2f%25E8%25AA%25B2%25E7%25A8%258B%25E7%25AD%2586%25E8%25A8%2598ntust-network-communication-protocols%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share (èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols on whatsapp"
       href="https://api.whatsapp.com/send?text=%28%e8%aa%b2%e7%a8%8b%e7%ad%86%e8%a8%98%29%28NTUST%29%20Network%20Communication%20Protocols%20-%20https%3a%2f%2fjonathan-tw.github.io%2fposts%2f%25E8%25AA%25B2%25E7%25A8%258B%25E7%25AD%2586%25E8%25A8%2598ntust-network-communication-protocols%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share (èª²ç¨‹ç­†è¨˜)(NTUST) Network Communication Protocols on telegram"
       href="https://telegram.me/share/url?text=%28%e8%aa%b2%e7%a8%8b%e7%ad%86%e8%a8%98%29%28NTUST%29%20Network%20Communication%20Protocols&amp;url=https%3a%2f%2fjonathan-tw.github.io%2fposts%2f%25E8%25AA%25B2%25E7%25A8%258B%25E7%25AD%2586%25E8%25A8%2598ntust-network-communication-protocols%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

        </footer>
    </div>
</article>
</main>


<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<footer class="footer">
    <span>
        Copyright
        &copy;
        2023-2023
        <a href="https://jonathan-tw.github.io" style="color:#939393;">Jonathan&#39;s Blog</a>
        All Rights Reserved
    </span>

    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;"></a>&nbsp;


    <span id="busuanzi_container">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
        Viewers: <span id="busuanzi_value_site_uv"></span>
        Views: <span id="busuanzi_value_site_pv"></span>
    </span>

</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script><script>

  let detail = document.getElementsByClassName('details')
 
  details = [].slice.call(detail);
 
  for (let index = 0; index < details.length; index++) {
 
  let element = details[index]
 
  const summary = element.getElementsByClassName('details-summary')[0];
 
  if (summary) {
 
  summary.addEventListener('click', () => {
 
  element.classList.toggle('open');
 
  }, false);
 
  }
 
  }
 
 </script>
 

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 400 || document.documentElement.scrollTop > 400) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent +
                    '\r\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n' +
                    'ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œ' + "Jonathan's Blog"
                +'ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚' +
                '\r\nåŸæ–‡é“¾æ¥ï¼š' + location.href;
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {
            }
            ;
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild === container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName === "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script>
    $("code[class^=language] ").on("mouseover", function () {
        if (this.clientWidth < this.scrollWidth) {
            $(this).css("width", "135%")
        }
    }).on("mouseout", function () {
        $(this).css("width", "100%")
    })
</script>
</body>

</html>
